<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="Alfa-bank-Tests" resourceRoot="" soapui-version="4.6.4" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="MerchantServiceImplServiceSoapBinding" type="wsdl" bindingName="{http://soap.merchant.api.web.phoenix.bpc.ru/}MerchantServiceImplServiceSoapBinding" soapVersion="1_1" anonymous="optional" definition="https://test.paymentgate.ru/testpayment/webservices/merchant-ws?wsdl" id="b630e263-5676-40c5-bba2-f546034faf3a" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="https://test.paymentgate.ru/testpayment/webservices/merchant-ws?wsdl"><con:part><con:url>https://test.paymentgate.ru/testpayment/webservices/merchant-ws?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="MerchantServiceImplService" targetNamespace="http://soap.merchant.api.web.phoenix.bpc.ru/" xmlns:ns1="http://engine.paymentgate.ru/webservices/merchant" xmlns:ns2="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://soap.merchant.api.web.phoenix.bpc.ru/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:import location="https://test.paymentgate.ru/testpayment/webservices/merchant-ws?wsdl=MerchantService.wsdl" namespace="http://engine.paymentgate.ru/webservices/merchant"></wsdl:import>
  <wsdl:binding name="MerchantServiceImplServiceSoapBinding" type="ns1:MerchantService">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getLastOrders">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="getLastOrders">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="getLastOrdersResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="verifyEnrollment">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="verifyEnrollment">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="verifyEnrollmentResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="paymentOrderBinding">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="paymentOrderBinding">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="paymentOrderBindingResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="bindCard">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="bindCard">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="bindCardResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="reverseOrder">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="reverseOrder">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="reverseOrderResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="paymentOrderOtherWay">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="paymentOrderOtherWay">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="paymentOrderOtherWayResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="checkAuthenticate">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="checkAuthenticate">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="checkAuthenticateResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="extendBinding">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="extendBinding">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="extendBindingResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="paymentOrder">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="paymentOrder">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="paymentOrderResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getOrderStatus">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="getOrderStatus">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="getOrderStatusResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="unBindCard">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="unBindCard">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="unBindCardResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="depositOrder">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="depositOrder">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="depositOrderResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="registerOrderPreAuth">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="registerOrderPreAuth">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="registerOrderPreAuthResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getOrderStatusExtended">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="getOrderStatusExtended">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="getOrderStatusExtendedResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getBindings">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="getBindings">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="getBindingsResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="refundOrder">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="refundOrder">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="refundOrderResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="finishThreeDs">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="finishThreeDs">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="finishThreeDsResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="registerOrder">
      <soap:operation soapAction="" style="rpc"/>
      <wsdl:input name="registerOrder">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:input>
      <wsdl:output name="registerOrderResponse">
        <soap:body namespace="http://engine.paymentgate.ru/webservices/merchant" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="MerchantServiceImplService">
    <wsdl:port binding="tns:MerchantServiceImplServiceSoapBinding" name="MerchantServiceImplPort">
      <soap:address location="https://test.paymentgate.ru/testpayment/webservices/merchant-ws"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>https://test.paymentgate.ru/testpayment/webservices/merchant-ws?wsdl=MerchantService.wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="MerchantService" targetNamespace="http://engine.paymentgate.ru/webservices/merchant" xmlns:ns1="http://engine.paymentgate.ru/webservices/merchant" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xs:schema targetNamespace="http://engine.paymentgate.ru/webservices/merchant" version="1.0" xmlns:tns="http://engine.paymentgate.ru/webservices/merchant" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:complexType name="orderInfo">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
        </xs:sequence>
        <xs:attribute name="ordernumber" type="xs:string"/>
        <xs:attribute name="amount" type="xs:long" use="required"/>
        <xs:attribute name="approvedAmount" type="xs:long" use="required"/>
        <xs:attribute name="depositedAmount" type="xs:long" use="required"/>
        <xs:attribute name="currencyCode" type="xs:short" use="required"/>
        <xs:attribute name="state" type="tns:transactionState"/>
        <xs:attribute name="fraudLevel" type="xs:int" use="required"/>
        <xs:attribute name="cardholder" type="xs:string"/>
        <xs:attribute name="panMasked" type="xs:string"/>
        <xs:attribute name="ip" type="xs:string"/>
        <xs:attribute name="actionCode" type="xs:string"/>
        <xs:attribute name="date" type="xs:dateTime"/>
        <xs:attribute name="bankName" type="xs:string"/>
        <xs:attribute name="approvalCode" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="serviceParam">
        <xs:sequence/>
        <xs:attribute name="name" type="xs:string" use="required"/>
        <xs:attribute name="value" type="xs:string" use="required"/>
      </xs:complexType>
      <xs:complexType abstract="true" name="abstractCollection">
        <xs:sequence/>
      </xs:complexType>
      <xs:complexType abstract="true" name="abstractList">
        <xs:complexContent>
          <xs:extension base="tns:abstractCollection">
            <xs:sequence/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="arrayList">
        <xs:complexContent>
          <xs:extension base="tns:abstractList">
            <xs:sequence/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="orderAddendumList">
        <xs:complexContent>
          <xs:extension base="tns:arrayList">
            <xs:sequence/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="verifyEnrollmentResponse">
        <xs:sequence/>
        <xs:attribute name="isEnrolled" type="xs:string"/>
        <xs:attribute name="emitterName" type="xs:string"/>
        <xs:attribute name="emitterCountryCode" type="xs:string"/>
        <xs:attribute name="errorMessage" type="xs:string"/>
        <xs:attribute name="errorCode" type="xs:int" use="required"/>
      </xs:complexType>
      <xs:complexType name="paymentOrderBindingParams">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
        </xs:sequence>
        <xs:attribute name="mdOrder" type="xs:string"/>
        <xs:attribute name="bindingId" type="xs:string"/>
        <xs:attribute name="language" type="xs:string"/>
        <xs:attribute name="ip" type="xs:string"/>
        <xs:attribute name="cvc" type="xs:string"/>
        <xs:attribute name="email" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="paymentOrderResult">
        <xs:sequence/>
        <xs:attribute name="errorCode" type="xs:int" use="required"/>
        <xs:attribute name="errorMessage" type="xs:string"/>
        <xs:attribute name="info" type="xs:string"/>
        <xs:attribute name="redirect" type="xs:string"/>
        <xs:attribute name="acsUrl" type="xs:string"/>
        <xs:attribute name="paReq" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="orderResult">
        <xs:sequence/>
        <xs:attribute name="errorCode" type="xs:int" use="required"/>
        <xs:attribute name="errorMessage" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="abstractServiceRequest">
        <xs:sequence/>
        <xs:attribute name="language" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="reversalOrderParams">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceRequest">
            <xs:sequence>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
            </xs:sequence>
            <xs:attribute name="orderId" type="xs:string"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="paymentOrderOtherWayParams">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceRequest">
            <xs:sequence/>
            <xs:attribute name="orderId" type="xs:string"/>
            <xs:attribute name="paymentWay" type="xs:string"/>
            <xs:attribute name="ip" type="xs:string"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="paymentOrderOtherWayResult">
        <xs:sequence/>
        <xs:attribute name="errorCode" type="xs:int" use="required"/>
        <xs:attribute name="errorMessage" type="xs:string"/>
        <xs:attribute name="info" type="xs:string"/>
        <xs:attribute name="redirect" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="loginParams">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceRequest">
            <xs:sequence/>
            <xs:attribute name="login" type="xs:string"/>
            <xs:attribute name="password" type="xs:string"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="extendBindingRequest">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceRequest">
            <xs:sequence/>
            <xs:attribute name="bindingId" type="xs:string"/>
            <xs:attribute name="newExpiry" type="xs:string"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType abstract="true" name="abstractServiceResponse">
        <xs:sequence/>
        <xs:attribute name="errorCode" type="xs:string"/>
        <xs:attribute name="errorMessage" type="xs:string"/>
        <xs:attribute name="userMessage" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="extendBindingResponse">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceResponse">
            <xs:sequence/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="paymentOrderParams">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
        </xs:sequence>
        <xs:attribute name="orderId" type="xs:string"/>
        <xs:attribute name="year" type="xs:string"/>
        <xs:attribute name="month" type="xs:string"/>
        <xs:attribute name="pan" type="xs:string"/>
        <xs:attribute name="cvc" type="xs:string"/>
        <xs:attribute name="cardholderName" type="xs:string"/>
        <xs:attribute name="language" type="xs:string"/>
        <xs:attribute name="ip" type="xs:string"/>
        <xs:attribute name="email" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="orderStatusRequest">
        <xs:sequence/>
        <xs:attribute name="orderId" type="xs:string"/>
        <xs:attribute name="language" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="orderStatusResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
          <xs:element minOccurs="0" name="orderBundle" type="tns:orderBundle"/>
        </xs:sequence>
        <xs:attribute name="orderStatus" type="xs:int" use="required"/>
        <xs:attribute name="errorCode" type="xs:int" use="required"/>
        <xs:attribute name="errorMessage" type="xs:string"/>
        <xs:attribute name="orderNumber" type="xs:string"/>
        <xs:attribute name="pan" type="xs:string"/>
        <xs:attribute name="expiration" type="xs:string"/>
        <xs:attribute name="cardholderName" type="xs:string"/>
        <xs:attribute name="amount" type="xs:int" use="required"/>
        <xs:attribute name="currency" type="xs:string"/>
        <xs:attribute name="approvalCode" type="xs:string"/>
        <xs:attribute name="authCode" type="xs:int" use="required"/>
        <xs:attribute name="ip" type="xs:string"/>
        <xs:attribute name="date" type="xs:dateTime"/>
        <xs:attribute name="orderDescription" type="xs:string"/>
        <xs:attribute name="merchantLogin" type="xs:string"/>
        <xs:attribute name="actionCodeDescription" type="xs:string"/>
        <xs:attribute name="clientId" type="xs:string"/>
        <xs:attribute name="bindingId" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="orderBundle">
        <xs:sequence>
          <xs:element minOccurs="0" name="orderCreationDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="customerDetails" type="tns:customerDetails"/>
          <xs:element name="cartItems" type="tns:cartItems"/>
          <xs:element minOccurs="0" name="loyalties" type="tns:loyalties"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="customerDetails">
        <xs:sequence>
          <xs:element minOccurs="0" name="email" type="xs:string"/>
          <xs:element minOccurs="0" name="phone" type="xs:string"/>
          <xs:element minOccurs="0" name="contact" type="xs:string"/>
          <xs:element minOccurs="0" name="deliveryInfo" type="tns:deliveryInfo"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="deliveryInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="deliveryType" type="xs:string"/>
          <xs:element name="country" type="xs:string"/>
          <xs:element name="city" type="xs:string"/>
          <xs:element name="postAddress" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="cartItems">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="items" nillable="true" type="tns:item"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="item">
        <xs:sequence>
          <xs:element name="name" type="xs:string"/>
          <xs:element minOccurs="0" name="itemDetails" type="tns:itemDetails"/>
          <xs:element name="quantity" type="tns:quantity"/>
          <xs:element name="itemAmount" type="xs:long"/>
          <xs:element name="itemCurrency" type="xs:int"/>
          <xs:element name="itemCode" type="xs:string"/>
          <xs:element minOccurs="0" name="discount" type="tns:discount"/>
          <xs:element minOccurs="0" name="agentInterest" type="tns:agentInterest"/>
        </xs:sequence>
        <xs:attribute name="positionId" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="itemDetails">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="itemDetailsParams" nillable="true" type="tns:itemDetailsParam"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="itemDetailsParam">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="name" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="quantity">
        <xs:simpleContent>
          <xs:extension base="xs:float">
            <xs:attribute name="measure" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="discount">
        <xs:sequence>
          <xs:element minOccurs="0" name="discountType" type="xs:string"/>
          <xs:element minOccurs="0" name="discountValue" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="agentInterest">
        <xs:sequence>
          <xs:element minOccurs="0" name="interestType" type="xs:string"/>
          <xs:element minOccurs="0" name="interestValue" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="loyalties">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="loyalties" nillable="true" type="tns:loyalty"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="loyalty">
        <xs:sequence>
          <xs:element name="bonusAmountForDebit" type="xs:long"/>
          <xs:element name="bonusAmountForCredit" type="xs:long"/>
        </xs:sequence>
        <xs:attribute name="loyaltyProgramName" type="xs:string"/>
        <xs:attribute name="positionId" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="orderParams">
        <xs:sequence>
          <xs:element minOccurs="0" name="returnUrl" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
          <xs:element minOccurs="0" name="clientId" type="xs:string"/>
          <xs:element minOccurs="0" name="orderBundle" type="tns:orderBundle"/>
        </xs:sequence>
        <xs:attribute name="merchantOrderNumber" type="xs:string"/>
        <xs:attribute name="description" type="xs:string"/>
        <xs:attribute name="amount" type="xs:int"/>
        <xs:attribute name="currency" type="xs:string"/>
        <xs:attribute name="language" type="xs:string"/>
        <xs:attribute name="pageView" type="tns:pageViewEnum"/>
        <xs:attribute name="sessionTimeoutSecs" type="xs:int"/>
      </xs:complexType>
      <xs:complexType name="registerOrderResult">
        <xs:sequence>
          <xs:element minOccurs="0" name="formUrl" type="xs:string"/>
        </xs:sequence>
        <xs:attribute name="orderId" type="xs:string"/>
        <xs:attribute name="errorCode" type="xs:int" use="required"/>
        <xs:attribute name="errorMessage" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="depositOrderParams">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceRequest">
            <xs:sequence>
              <xs:element minOccurs="0" name="orderBundle" type="tns:orderBundle"/>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
            </xs:sequence>
            <xs:attribute name="orderId" type="xs:string"/>
            <xs:attribute name="depositAmount" type="xs:int"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="getOrderStatusExtendedRequest">
        <xs:complexContent>
          <xs:extension base="tns:orderStatusRequest">
            <xs:sequence>
              <xs:element minOccurs="0" name="merchantOrderNumber" type="xs:string"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="getOrderStatusExtendedResponse">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceResponse">
            <xs:sequence>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="merchantOrderParams" type="tns:serviceParam"/>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="attributes" type="tns:serviceParam"/>
              <xs:element minOccurs="0" name="cardAuthInfo" type="tns:cardAuthInfo"/>
              <xs:element minOccurs="0" name="bindingInfo" type="tns:cardBindingInfo"/>
              <xs:element minOccurs="0" name="authDateTime" type="xs:dateTime"/>
              <xs:element minOccurs="0" name="terminalId" type="xs:string"/>
              <xs:element minOccurs="0" name="authRefNum" type="xs:string"/>
              <xs:element minOccurs="0" name="paymentAmountInfo" type="tns:paymentAmountInfo"/>
              <xs:element minOccurs="0" name="bankInfo" type="tns:bankInfo"/>
              <xs:element minOccurs="0" name="orderBundle" type="tns:orderBundle"/>
            </xs:sequence>
            <xs:attribute name="orderNumber" type="xs:string"/>
            <xs:attribute name="orderStatus" type="xs:int"/>
            <xs:attribute name="actionCode" type="xs:int"/>
            <xs:attribute name="actionCodeDescription" type="xs:string"/>
            <xs:attribute name="amount" type="xs:int"/>
            <xs:attribute name="currency" type="xs:string"/>
            <xs:attribute name="date" type="xs:dateTime"/>
            <xs:attribute name="orderDescription" type="xs:string"/>
            <xs:attribute name="ip" type="xs:string"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="cardAuthInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="secureAuthInfo" type="tns:secureAuthInfo"/>
        </xs:sequence>
        <xs:attribute name="maskedPan" type="xs:string"/>
        <xs:attribute name="expiration" type="xs:string"/>
        <xs:attribute name="cardholderName" type="xs:string"/>
        <xs:attribute name="approvalCode" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="secureAuthInfo">
        <xs:sequence>
          <xs:element name="eci" type="xs:int"/>
          <xs:element minOccurs="0" name="threeDSInfo" type="tns:threeDSInfo"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="threeDSInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="cavv" type="xs:string"/>
          <xs:element minOccurs="0" name="xid" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="cardBindingInfo">
        <xs:sequence/>
        <xs:attribute name="clientId" type="xs:string"/>
        <xs:attribute name="bindingId" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="paymentAmountInfo">
        <xs:sequence/>
        <xs:attribute name="paymentState" type="tns:transactionState"/>
        <xs:attribute name="approvedAmount" type="xs:int" use="required"/>
        <xs:attribute name="depositedAmount" type="xs:int" use="required"/>
        <xs:attribute name="refundedAmount" type="xs:int" use="required"/>
      </xs:complexType>
      <xs:complexType name="bankInfo">
        <xs:sequence/>
        <xs:attribute name="bankName" type="xs:string"/>
        <xs:attribute name="bankCountryCode" type="xs:string"/>
        <xs:attribute name="bankCountryName" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="refundOrderParams">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceRequest">
            <xs:sequence>
              <xs:element minOccurs="0" name="refundItems" type="tns:cartItems"/>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="params" type="tns:serviceParam"/>
            </xs:sequence>
            <xs:attribute name="orderId" type="xs:string"/>
            <xs:attribute name="refundAmount" type="xs:int"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="getBindingsRequest">
        <xs:sequence/>
        <xs:attribute name="clientId" type="xs:string"/>
        <xs:attribute name="bindingId" type="xs:string"/>
        <xs:attribute name="showExpired" type="xs:boolean" use="required"/>
        <xs:attribute name="language" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="getBindingsResponse">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceResponse">
            <xs:sequence>
              <xs:element name="bindings">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element maxOccurs="unbounded" minOccurs="0" name="binding" type="tns:binding"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="binding">
        <xs:sequence/>
        <xs:attribute name="bindingId" type="xs:string"/>
        <xs:attribute name="maskedPan" type="xs:string"/>
        <xs:attribute name="expiryDate" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="finishThreeDSRequest">
        <xs:complexContent>
          <xs:extension base="tns:abstractServiceRequest">
            <xs:sequence/>
            <xs:attribute name="md" type="xs:string" use="required"/>
            <xs:attribute name="paRes" type="xs:string" use="required"/>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="finishThreeDSResponse">
        <xs:sequence/>
        <xs:attribute name="errorMessage" type="xs:string"/>
        <xs:attribute name="errorCode" type="xs:int" use="required"/>
        <xs:attribute name="returnUrl" type="xs:string"/>
      </xs:complexType>
      <xs:simpleType name="transactionState">
        <xs:restriction base="xs:string">
          <xs:enumeration value="CREATED"/>
          <xs:enumeration value="APPROVED"/>
          <xs:enumeration value="DECLINED"/>
          <xs:enumeration value="REVERSED"/>
          <xs:enumeration value="DEPOSITED"/>
          <xs:enumeration value="REFUNDED"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="pageViewEnum">
        <xs:restriction base="xs:string">
          <xs:enumeration value="MOBILE"/>
          <xs:enumeration value="DESKTOP"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:complexType final="#all" name="orderInfoArray">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="item" nillable="true" type="tns:orderInfo"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="paymentOrderOtherWayResponse">
    <wsdl:part name="return" type="ns1:paymentOrderOtherWayResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getLastOrders">
    <wsdl:part name="from" type="xsd:dateTime"></wsdl:part>
    <wsdl:part name="to" type="xsd:dateTime"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getOrderStatusResponse">
    <wsdl:part name="return" type="ns1:orderStatusResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="depositOrder">
    <wsdl:part name="order" type="ns1:depositOrderParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="reverseOrder">
    <wsdl:part name="order" type="ns1:reversalOrderParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="verifyEnrollment">
    <wsdl:part name="pan" type="xsd:string"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getLastOrdersResponse">
    <wsdl:part name="return" type="ns1:orderInfoArray"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="unBindCardResponse">
    <wsdl:part name="return" type="ns1:orderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="refundOrder">
    <wsdl:part name="order" type="ns1:refundOrderParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getOrderStatusExtendedResponse">
    <wsdl:part name="return" type="ns1:getOrderStatusExtendedResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="registerOrderPreAuthResponse">
    <wsdl:part name="return" type="ns1:registerOrderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getBindings">
    <wsdl:part name="request" type="ns1:getBindingsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="reverseOrderResponse">
    <wsdl:part name="return" type="ns1:orderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="registerOrderResponse">
    <wsdl:part name="return" type="ns1:registerOrderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="unBindCard">
    <wsdl:part name="bindingId" type="xsd:string"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="paymentOrderBindingResponse">
    <wsdl:part name="return" type="ns1:paymentOrderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="refundOrderResponse">
    <wsdl:part name="return" type="ns1:orderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getOrderStatusExtended">
    <wsdl:part name="order" type="ns1:getOrderStatusExtendedRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getOrderStatus">
    <wsdl:part name="order" type="ns1:orderStatusRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="bindCard">
    <wsdl:part name="bindingId" type="xsd:string"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="paymentOrder">
    <wsdl:part name="order" type="ns1:paymentOrderParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="finishThreeDsResponse">
    <wsdl:part name="return" type="ns1:finishThreeDSResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="finishThreeDs">
    <wsdl:part name="request" type="ns1:finishThreeDSRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="registerOrderPreAuth">
    <wsdl:part name="order" type="ns1:orderParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="depositOrderResponse">
    <wsdl:part name="return" type="ns1:orderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="registerOrder">
    <wsdl:part name="order" type="ns1:orderParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="checkAuthenticateResponse">
    <wsdl:part name="return" type="ns1:orderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="bindCardResponse">
    <wsdl:part name="return" type="ns1:orderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="paymentOrderResponse">
    <wsdl:part name="return" type="ns1:paymentOrderResult"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="extendBinding">
    <wsdl:part name="request" type="ns1:extendBindingRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="paymentOrderBinding">
    <wsdl:part name="order" type="ns1:paymentOrderBindingParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="extendBindingResponse">
    <wsdl:part name="return" type="ns1:extendBindingResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="paymentOrderOtherWay">
    <wsdl:part name="order" type="ns1:paymentOrderOtherWayParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="checkAuthenticate">
    <wsdl:part name="login" type="ns1:loginParams"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getBindingsResponse">
    <wsdl:part name="return" type="ns1:getBindingsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="verifyEnrollmentResponse">
    <wsdl:part name="return" type="ns1:verifyEnrollmentResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="MerchantService">
    <wsdl:operation name="getLastOrders">
      <wsdl:input message="ns1:getLastOrders" name="getLastOrders"></wsdl:input>
      <wsdl:output message="ns1:getLastOrdersResponse" name="getLastOrdersResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="verifyEnrollment">
      <wsdl:input message="ns1:verifyEnrollment" name="verifyEnrollment"></wsdl:input>
      <wsdl:output message="ns1:verifyEnrollmentResponse" name="verifyEnrollmentResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="paymentOrderBinding">
      <wsdl:input message="ns1:paymentOrderBinding" name="paymentOrderBinding"></wsdl:input>
      <wsdl:output message="ns1:paymentOrderBindingResponse" name="paymentOrderBindingResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="bindCard">
      <wsdl:input message="ns1:bindCard" name="bindCard"></wsdl:input>
      <wsdl:output message="ns1:bindCardResponse" name="bindCardResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="reverseOrder">
      <wsdl:input message="ns1:reverseOrder" name="reverseOrder"></wsdl:input>
      <wsdl:output message="ns1:reverseOrderResponse" name="reverseOrderResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="paymentOrderOtherWay">
      <wsdl:input message="ns1:paymentOrderOtherWay" name="paymentOrderOtherWay"></wsdl:input>
      <wsdl:output message="ns1:paymentOrderOtherWayResponse" name="paymentOrderOtherWayResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="checkAuthenticate">
      <wsdl:input message="ns1:checkAuthenticate" name="checkAuthenticate"></wsdl:input>
      <wsdl:output message="ns1:checkAuthenticateResponse" name="checkAuthenticateResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="extendBinding">
      <wsdl:input message="ns1:extendBinding" name="extendBinding"></wsdl:input>
      <wsdl:output message="ns1:extendBindingResponse" name="extendBindingResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="paymentOrder">
      <wsdl:input message="ns1:paymentOrder" name="paymentOrder"></wsdl:input>
      <wsdl:output message="ns1:paymentOrderResponse" name="paymentOrderResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="unBindCard">
      <wsdl:input message="ns1:unBindCard" name="unBindCard"></wsdl:input>
      <wsdl:output message="ns1:unBindCardResponse" name="unBindCardResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getOrderStatus">
      <wsdl:input message="ns1:getOrderStatus" name="getOrderStatus"></wsdl:input>
      <wsdl:output message="ns1:getOrderStatusResponse" name="getOrderStatusResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="registerOrderPreAuth">
      <wsdl:input message="ns1:registerOrderPreAuth" name="registerOrderPreAuth"></wsdl:input>
      <wsdl:output message="ns1:registerOrderPreAuthResponse" name="registerOrderPreAuthResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="depositOrder">
      <wsdl:input message="ns1:depositOrder" name="depositOrder"></wsdl:input>
      <wsdl:output message="ns1:depositOrderResponse" name="depositOrderResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getOrderStatusExtended">
      <wsdl:input message="ns1:getOrderStatusExtended" name="getOrderStatusExtended"></wsdl:input>
      <wsdl:output message="ns1:getOrderStatusExtendedResponse" name="getOrderStatusExtendedResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="refundOrder">
      <wsdl:input message="ns1:refundOrder" name="refundOrder"></wsdl:input>
      <wsdl:output message="ns1:refundOrderResponse" name="refundOrderResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getBindings">
      <wsdl:input message="ns1:getBindings" name="getBindings"></wsdl:input>
      <wsdl:output message="ns1:getBindingsResponse" name="getBindingsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="finishThreeDs">
      <wsdl:input message="ns1:finishThreeDs" name="finishThreeDs"></wsdl:input>
      <wsdl:output message="ns1:finishThreeDsResponse" name="finishThreeDsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="registerOrder">
      <wsdl:input message="ns1:registerOrder" name="registerOrder"></wsdl:input>
      <wsdl:output message="ns1:registerOrderResponse" name="registerOrderResponse"></wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint></con:endpoints><con:operation isOneWay="false" action="" name="bindCard" bindingOperationName="bindCard" type="Request-Response" outputName="bindCardResponse" inputName="bindCard" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="e9555fae-952a-4eec-9b64-612a0529e115"><con:settings/><con:call name="Request 1" id="a171b2b6-4b65-408e-a8f2-13a19d07b455"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:bindCard>
         <bindingId>?</bindingId>
      </mer:bindCard>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/bindCard"/></con:call></con:operation><con:operation isOneWay="false" action="" name="checkAuthenticate" bindingOperationName="checkAuthenticate" type="Request-Response" outputName="checkAuthenticateResponse" inputName="checkAuthenticate" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="3e68fa28-c54f-4d89-b890-52a7f2028880"><con:settings/><con:call name="Request 1" id="834fb57b-3da8-4bfc-9706-f8bc8385e9e1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:checkAuthenticate>
         <login language="?" login="?" password="?"/>
      </mer:checkAuthenticate>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/checkAuthenticate"/></con:call></con:operation><con:operation isOneWay="false" action="" name="depositOrder" bindingOperationName="depositOrder" type="Request-Response" outputName="depositOrderResponse" inputName="depositOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="f78fa855-e729-4961-961f-39b96c1e72ca"><con:settings/><con:call name="Request 1" id="a7962ce9-da3a-4a8a-863f-1fc17969577d"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:depositOrder>
         <order language="?" orderId="?" depositAmount="?">
            <!--Optional:-->
            <orderBundle>
               <!--Optional:-->
               <orderCreationDate>?</orderCreationDate>
               <!--Optional:-->
               <customerDetails>
                  <!--Optional:-->
                  <email>?</email>
                  <!--Optional:-->
                  <phone>?</phone>
                  <!--Optional:-->
                  <contact>?</contact>
                  <!--Optional:-->
                  <deliveryInfo>
                     <!--Optional:-->
                     <deliveryType>?</deliveryType>
                     <country>?</country>
                     <city>?</city>
                     <postAddress>?</postAddress>
                  </deliveryInfo>
               </customerDetails>
               <cartItems>
                  <!--Zero or more repetitions:-->
                  <items positionId="?">
                     <name>?</name>
                     <!--Optional:-->
                     <itemDetails>
                        <!--Zero or more repetitions:-->
                        <itemDetailsParams name="?">?</itemDetailsParams>
                     </itemDetails>
                     <quantity measure="?">?</quantity>
                     <itemAmount>?</itemAmount>
                     <itemCurrency>?</itemCurrency>
                     <itemCode>?</itemCode>
                     <!--Optional:-->
                     <discount>
                        <!--Optional:-->
                        <discountType>?</discountType>
                        <!--Optional:-->
                        <discountValue>?</discountValue>
                     </discount>
                     <!--Optional:-->
                     <agentInterest>
                        <!--Optional:-->
                        <interestType>?</interestType>
                        <!--Optional:-->
                        <interestValue>?</interestValue>
                     </agentInterest>
                  </items>
               </cartItems>
               <!--Optional:-->
               <loyalties>
                  <!--Zero or more repetitions:-->
                  <loyalties loyaltyProgramName="?" positionId="?">
                     <bonusAmountForDebit>?</bonusAmountForDebit>
                     <bonusAmountForCredit>?</bonusAmountForCredit>
                  </loyalties>
               </loyalties>
            </orderBundle>
            <!--Zero or more repetitions:-->
            <params name="?" value="?"/>
         </order>
      </mer:depositOrder>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/depositOrder"/></con:call></con:operation><con:operation isOneWay="false" action="" name="extendBinding" bindingOperationName="extendBinding" type="Request-Response" outputName="extendBindingResponse" inputName="extendBinding" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="4a0889a7-bb62-42a6-a914-1ca558a51c18"><con:settings/><con:call name="Request 1" id="9ce8dbc6-c361-4833-a943-a44b80e7cf51"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:extendBinding>
         <request language="?" bindingId="?" newExpiry="?"/>
      </mer:extendBinding>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/extendBinding"/></con:call></con:operation><con:operation isOneWay="false" action="" name="finishThreeDs" bindingOperationName="finishThreeDs" type="Request-Response" outputName="finishThreeDsResponse" inputName="finishThreeDs" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="48edbf24-ee3d-454b-b41d-132efc50443f"><con:settings/><con:call name="Request 1" id="d7248319-39d7-4559-99e0-87913896b730"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:finishThreeDs>
         <request language="?" md="?" paRes="?"/>
      </mer:finishThreeDs>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/finishThreeDs"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="" name="getBindings" bindingOperationName="getBindings" type="Request-Response" outputName="getBindingsResponse" inputName="getBindings" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="ca3c2a8b-7096-476a-b531-3058e586ea6f"><con:settings/><con:call name="Request 1" id="852e8f74-e80a-4879-b42a-2bce1bd51ff4"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:getBindings>
         <request clientId="?" bindingId="?" showExpired="?" language="?"/>
      </mer:getBindings>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/getBindings"/></con:call></con:operation><con:operation isOneWay="false" action="" name="getLastOrders" bindingOperationName="getLastOrders" type="Request-Response" outputName="getLastOrdersResponse" inputName="getLastOrders" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="16c5476c-bcc5-4cf3-9d3b-09ef90744ccf"><con:settings/><con:call name="Request 1" id="f5fe5756-991d-49cc-9346-8ac7c6ac7c2e"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:getLastOrders>
         <from>?</from>
         <to>?</to>
      </mer:getLastOrders>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/getLastOrders"/></con:call></con:operation><con:operation isOneWay="false" action="" name="getOrderStatus" bindingOperationName="getOrderStatus" type="Request-Response" outputName="getOrderStatusResponse" inputName="getOrderStatus" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="bd347a4d-f6b6-4cd9-8bb8-1b8bb07e5284"><con:settings/><con:call name="Request 1" id="e2f91014-84cb-4299-9b70-5e67a919f095"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:getOrderStatus>
         <order orderId="?" language="?"/>
      </mer:getOrderStatus>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/getOrderStatus"/></con:call></con:operation><con:operation isOneWay="false" action="" name="getOrderStatusExtended" bindingOperationName="getOrderStatusExtended" type="Request-Response" outputName="getOrderStatusExtendedResponse" inputName="getOrderStatusExtended" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="1efb2a4c-1590-4ecb-9fd3-c9407f051242"><con:settings/><con:call name="Request 1" id="9450720d-dd18-4782-84e6-b061617143d8"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:getOrderStatusExtended>
         <order orderId="?" language="?">
            <!--Optional:-->
            <merchantOrderNumber>?</merchantOrderNumber>
         </order>
      </mer:getOrderStatusExtended>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/getOrderStatusExtended"/></con:call></con:operation><con:operation isOneWay="false" action="" name="paymentOrder" bindingOperationName="paymentOrder" type="Request-Response" outputName="paymentOrderResponse" inputName="paymentOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="da4e8813-851a-4238-a924-f471f9b11c20"><con:settings/><con:call name="Request 1" id="2a2aad00-f8ee-4feb-91a8-94084352aebc"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:paymentOrder>
         <order orderId="?" year="?" month="?" pan="?" cvc="?" cardholderName="?" language="?" ip="?" email="?">
            <!--Zero or more repetitions:-->
            <params name="?" value="?"/>
         </order>
      </mer:paymentOrder>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/paymentOrder"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="" name="paymentOrderBinding" bindingOperationName="paymentOrderBinding" type="Request-Response" outputName="paymentOrderBindingResponse" inputName="paymentOrderBinding" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="a90ae230-bad8-4cc3-94f7-adb6bcf14a02"><con:settings/><con:call name="Request 1" id="064ecb2b-b23e-46fa-98e8-16e8a1e1f450"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:paymentOrderBinding>
         <order mdOrder="?" bindingId="?" language="?" ip="?" cvc="?" email="?">
            <!--Zero or more repetitions:-->
            <params name="?" value="?"/>
         </order>
      </mer:paymentOrderBinding>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/paymentOrderBinding"/></con:call></con:operation><con:operation isOneWay="false" action="" name="paymentOrderOtherWay" bindingOperationName="paymentOrderOtherWay" type="Request-Response" outputName="paymentOrderOtherWayResponse" inputName="paymentOrderOtherWay" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="65f81736-1aca-4c8e-ae04-c286c253d6b3"><con:settings/><con:call name="Request 1" id="2a43069d-a8e1-4216-a6d1-4087bf6bb853"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:paymentOrderOtherWay>
         <order language="?" orderId="?" paymentWay="?" ip="?"/>
      </mer:paymentOrderOtherWay>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/paymentOrderOtherWay"/></con:call></con:operation><con:operation isOneWay="false" action="" name="refundOrder" bindingOperationName="refundOrder" type="Request-Response" outputName="refundOrderResponse" inputName="refundOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="af82911f-1f13-4715-81b4-c5b0fdd84a0c"><con:settings/><con:call name="Request 1" id="2f5e516c-4deb-4d38-9342-062303bc49c0"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:refundOrder>
         <order language="?" orderId="?" refundAmount="?">
            <!--Optional:-->
            <refundItems>
               <!--Zero or more repetitions:-->
               <items positionId="?">
                  <name>?</name>
                  <!--Optional:-->
                  <itemDetails>
                     <!--Zero or more repetitions:-->
                     <itemDetailsParams name="?">?</itemDetailsParams>
                  </itemDetails>
                  <quantity measure="?">?</quantity>
                  <itemAmount>?</itemAmount>
                  <itemCurrency>?</itemCurrency>
                  <itemCode>?</itemCode>
                  <!--Optional:-->
                  <discount>
                     <!--Optional:-->
                     <discountType>?</discountType>
                     <!--Optional:-->
                     <discountValue>?</discountValue>
                  </discount>
                  <!--Optional:-->
                  <agentInterest>
                     <!--Optional:-->
                     <interestType>?</interestType>
                     <!--Optional:-->
                     <interestValue>?</interestValue>
                  </agentInterest>
               </items>
            </refundItems>
            <!--Zero or more repetitions:-->
            <params name="?" value="?"/>
         </order>
      </mer:refundOrder>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/refundOrder"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="" name="registerOrder" bindingOperationName="registerOrder" type="Request-Response" outputName="registerOrderResponse" inputName="registerOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="dbb2951f-e393-48e8-8095-15ec9d871c3f"><con:settings/><con:call name="Request 1" id="ca441d4a-c9f9-4384-a321-d3c8b06563d7"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:registerOrder>
         <order merchantOrderNumber="?" description="?" amount="?" currency="?" language="?" pageView="?" sessionTimeoutSecs="?">
            <!--Optional:-->
            <returnUrl>?</returnUrl>
            <!--Zero or more repetitions:-->
            <params name="?" value="?"/>
            <!--Optional:-->
            <clientId>?</clientId>
            <!--Optional:-->
            <orderBundle>
               <!--Optional:-->
               <orderCreationDate>?</orderCreationDate>
               <!--Optional:-->
               <customerDetails>
                  <!--Optional:-->
                  <email>?</email>
                  <!--Optional:-->
                  <phone>?</phone>
                  <!--Optional:-->
                  <contact>?</contact>
                  <!--Optional:-->
                  <deliveryInfo>
                     <!--Optional:-->
                     <deliveryType>?</deliveryType>
                     <country>?</country>
                     <city>?</city>
                     <postAddress>?</postAddress>
                  </deliveryInfo>
               </customerDetails>
               <cartItems>
                  <!--Zero or more repetitions:-->
                  <items positionId="?">
                     <name>?</name>
                     <!--Optional:-->
                     <itemDetails>
                        <!--Zero or more repetitions:-->
                        <itemDetailsParams name="?">?</itemDetailsParams>
                     </itemDetails>
                     <quantity measure="?">?</quantity>
                     <itemAmount>?</itemAmount>
                     <itemCurrency>?</itemCurrency>
                     <itemCode>?</itemCode>
                     <!--Optional:-->
                     <discount>
                        <!--Optional:-->
                        <discountType>?</discountType>
                        <!--Optional:-->
                        <discountValue>?</discountValue>
                     </discount>
                     <!--Optional:-->
                     <agentInterest>
                        <!--Optional:-->
                        <interestType>?</interestType>
                        <!--Optional:-->
                        <interestValue>?</interestValue>
                     </agentInterest>
                  </items>
               </cartItems>
               <!--Optional:-->
               <loyalties>
                  <!--Zero or more repetitions:-->
                  <loyalties loyaltyProgramName="?" positionId="?">
                     <bonusAmountForDebit>?</bonusAmountForDebit>
                     <bonusAmountForCredit>?</bonusAmountForCredit>
                  </loyalties>
               </loyalties>
            </orderBundle>
         </order>
      </mer:registerOrder>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/registerOrder"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="" name="registerOrderPreAuth" bindingOperationName="registerOrderPreAuth" type="Request-Response" outputName="registerOrderPreAuthResponse" inputName="registerOrderPreAuth" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="9bb2c431-2cbb-4e3c-9920-764a26d42339"><con:settings/><con:call name="Request 1" id="70b9592c-d236-4f32-bedc-27067236ac21"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:registerOrderPreAuth>
         <order merchantOrderNumber="?" description="?" amount="?" currency="?" language="?" pageView="?" sessionTimeoutSecs="?">
            <!--Optional:-->
            <returnUrl>?</returnUrl>
            <!--Zero or more repetitions:-->
            <params name="?" value="?"/>
            <!--Optional:-->
            <clientId>?</clientId>
            <!--Optional:-->
            <orderBundle>
               <!--Optional:-->
               <orderCreationDate>?</orderCreationDate>
               <!--Optional:-->
               <customerDetails>
                  <!--Optional:-->
                  <email>?</email>
                  <!--Optional:-->
                  <phone>?</phone>
                  <!--Optional:-->
                  <contact>?</contact>
                  <!--Optional:-->
                  <deliveryInfo>
                     <!--Optional:-->
                     <deliveryType>?</deliveryType>
                     <country>?</country>
                     <city>?</city>
                     <postAddress>?</postAddress>
                  </deliveryInfo>
               </customerDetails>
               <cartItems>
                  <!--Zero or more repetitions:-->
                  <items positionId="?">
                     <name>?</name>
                     <!--Optional:-->
                     <itemDetails>
                        <!--Zero or more repetitions:-->
                        <itemDetailsParams name="?">?</itemDetailsParams>
                     </itemDetails>
                     <quantity measure="?">?</quantity>
                     <itemAmount>?</itemAmount>
                     <itemCurrency>?</itemCurrency>
                     <itemCode>?</itemCode>
                     <!--Optional:-->
                     <discount>
                        <!--Optional:-->
                        <discountType>?</discountType>
                        <!--Optional:-->
                        <discountValue>?</discountValue>
                     </discount>
                     <!--Optional:-->
                     <agentInterest>
                        <!--Optional:-->
                        <interestType>?</interestType>
                        <!--Optional:-->
                        <interestValue>?</interestValue>
                     </agentInterest>
                  </items>
               </cartItems>
               <!--Optional:-->
               <loyalties>
                  <!--Zero or more repetitions:-->
                  <loyalties loyaltyProgramName="?" positionId="?">
                     <bonusAmountForDebit>?</bonusAmountForDebit>
                     <bonusAmountForCredit>?</bonusAmountForCredit>
                  </loyalties>
               </loyalties>
            </orderBundle>
         </order>
      </mer:registerOrderPreAuth>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/registerOrderPreAuth"/></con:call></con:operation><con:operation isOneWay="false" action="" name="reverseOrder" bindingOperationName="reverseOrder" type="Request-Response" outputName="reverseOrderResponse" inputName="reverseOrder" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="881b8c17-3831-4c11-916f-f6cf5db0eb60"><con:settings/><con:call name="Request 1" id="6edae506-deb4-4850-881a-222c7d4dfd13"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:reverseOrder>
         <order language="?" orderId="?">
            <!--Zero or more repetitions:-->
            <params name="?" value="?"/>
         </order>
      </mer:reverseOrder>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/reverseOrder"/></con:call></con:operation><con:operation isOneWay="false" action="" name="unBindCard" bindingOperationName="unBindCard" type="Request-Response" outputName="unBindCardResponse" inputName="unBindCard" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="f4c2b878-72ca-4a95-9b6a-f7eb0cc35ccf"><con:settings/><con:call name="Request 1" id="cb50ac37-a762-424f-9fee-690bbd1538a8"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:unBindCard>
         <bindingId>?</bindingId>
      </mer:unBindCard>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/unBindCard"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="" name="verifyEnrollment" bindingOperationName="verifyEnrollment" type="Request-Response" outputName="verifyEnrollmentResponse" inputName="verifyEnrollment" receivesAttachments="false" sendsAttachments="false" anonymous="optional" id="f86e0e0f-0305-4fb0-a119-b88ee8ec69f3"><con:settings/><con:call name="Request 1" id="465f2df8-1740-4eee-8b9e-b49abcefd40c"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://test.paymentgate.ru/testpayment/webservices/merchant-ws</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mer="http://engine.paymentgate.ru/webservices/merchant">
   <soapenv:Header/>
   <soapenv:Body>
      <mer:verifyEnrollment>
         <pan>?</pan>
      </mer:verifyEnrollment>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://soap.merchant.api.web.phoenix.bpc.ru/MerchantService/verifyEnrollment"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="AlfaRestApi" type="rest" basePath="" id="4dce7dd0-377c-43dd-82cc-b7c8accb559c" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:endpoint>https://test.paymentgate.ru/testpayment/rest/</con:endpoint></con:endpoints><con:resource name="registerOrder" path="register.do" id="b0cd38d9-2be1-4119-80c1-9d78ef6be9d8"><con:settings/><con:parameters><con:parameter><con:name>amount</con:name><con:value>100</con:value><con:style>QUERY</con:style><con:default>100</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>currency</con:name><con:value>810</con:value><con:style>QUERY</con:style><con:default>810</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderNumber</con:name><con:value>87654321</con:value><con:style>QUERY</con:style><con:default>87654321</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>returnUrl</con:name><con:value>finish.html?login=test&amp;password=testPwd</con:value><con:style>QUERY</con:style><con:default>finish.html?login=test&amp;password=testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userName</con:name><con:value>test </con:value><con:style>QUERY</con:style><con:default>test </con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>jsonParams</con:name><con:value>{"orderNumber":1234567890}</con:value><con:style>QUERY</con:style><con:default>{"orderNumber":1234567890}</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="3043c058-b838-421a-af93-104c85dbd8d8"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="registerOrder" mediaType="application/json" postQueryString="false" id="1f2b50e9-56e7-49be-bbb0-c53b17e0f31b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="Reverse" path="reverse.do" id="1bdbce1b-07b5-40ea-b5c7-291a6c916dd5"><con:settings/><con:parameters><con:parameter><con:name>amount</con:name><con:value>100</con:value><con:style>QUERY</con:style><con:default>100</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>currency</con:name><con:value>810</con:value><con:style>QUERY</con:style><con:default>810</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderId</con:name><con:value>e5b59d3d-746b-4828-9da4-06f126e01b68 </con:value><con:style>QUERY</con:style><con:default>e5b59d3d-746b-4828-9da4-06f126e01b68 </con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userName</con:name><con:value>testtest</con:value><con:style>QUERY</con:style><con:default>testtest</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="7991991f-830b-4692-a010-df7e5a15652a"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="099230c5-4961-4c18-8acf-cc6a9d6a5887"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="Refund" path="refund.do" id="668badc4-efa3-414d-b776-6403e3ec4696"><con:settings/><con:parameters><con:parameter><con:name>amount</con:name><con:value>500</con:value><con:style>QUERY</con:style><con:default>500</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>currency</con:name><con:value>810</con:value><con:style>QUERY</con:style><con:default>810</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderId</con:name><con:value>5e97e3fd-1d20-4b4b-a542-f5995f5e8208 </con:value><con:style>QUERY</con:style><con:default>5e97e3fd-1d20-4b4b-a542-f5995f5e8208 </con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userName</con:name><con:value>testtest</con:value><con:style>QUERY</con:style><con:default>testtest</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="ea5f7357-0940-47d6-8676-cca6e61ed190"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="ef9d773c-02d6-47d7-a4b5-9f7730a6e9b0"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="amount" value="500" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="getOrderStatus" path="getOrderStatus.do" id="a70541fb-961b-4654-b5be-f0166b79b882"><con:settings/><con:parameters><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderId</con:name><con:value>5e97e3fd-1d20-4b4b-a542-f5995f5e8208 </con:value><con:style>QUERY</con:style><con:default>5e97e3fd-1d20-4b4b-a542-f5995f5e8208 </con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userName</con:name><con:value>testtest</con:value><con:style>QUERY</con:style><con:default>testtest</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="88265b98-28c8-4541-bf99-727b5d30d113"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="c2337bc3-8612-47a2-b863-567cd092553f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="userName" value="test"/>
  <con:entry key="language" value="ru"/>
  <con:entry key="orderId" value="31aa2b05-8827-4207-b388-f0bcc70583c6"/>
</con:parameters></con:request></con:method></con:resource><con:resource name="getOrderStatusExtended" path="getOrderStatusExtended.do" id="ae4b1dd6-5e47-4bf7-b806-fb741c89df63"><con:settings/><con:parameters><con:parameter><con:name>userName</con:name><con:value>login</con:value><con:style>QUERY</con:style><con:default>login</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>password</con:value><con:style>QUERY</con:style><con:default>password</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderId</con:name><con:value>285b2973-4d02-4980-a54e-57c4d0d2xxx9</con:value><con:style>QUERY</con:style><con:default>285b2973-4d02-4980-a54e-57c4d0d2xxx9</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="96a1f299-1fd8-45e0-a775-d3b2291ce79d"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="4d815afe-ffd3-4ea2-aa9a-7566a2a9d2bb"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="userName" value="test"/>
  <con:entry key="password" value="testPwd"/>
  <con:entry key="orderId" value="31aa2b05-8827-4207-b388-f0bcc70583c6"/>
</con:parameters></con:request></con:method></con:resource><con:resource name="isEnrollment" path="verifyEnrollment.do" id="87b63511-a6a0-49b0-a09a-5f68a6c44753"><con:settings/><con:parameters><con:parameter><con:name>userName</con:name><con:value>api</con:value><con:style>QUERY</con:style><con:default>api</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>***</con:value><con:style>QUERY</con:style><con:default>***</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>pan</con:name><con:value>4111111111111111]</con:value><con:style>QUERY</con:style><con:default>4111111111111111]</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="7896d433-91af-4268-b804-7ec0f63af367"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="9d2e4dcb-4fcb-424e-be00-682017d9544f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="userName" value="test"/>
  <con:entry key="password" value="testPwd"/>
  <con:entry key="pan" value="4111111111111111"/>
</con:parameters></con:request></con:method></con:resource><con:resource name="preAuth" path="registerPreAuth.do" id="469ab232-06e3-498f-a568-7cfd6fe8fb40"><con:settings/><con:parameters><con:parameter required="true"><con:name>amount</con:name><con:value>100</con:value><con:style>QUERY</con:style><con:default>100</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>currency</con:name><con:value>810</con:value><con:style>QUERY</con:style><con:default>810</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderNumber</con:name><con:value>87654321</con:value><con:style>QUERY</con:style><con:default>87654321</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd </con:value><con:style>QUERY</con:style><con:default>testPwd </con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>returnUrl</con:name><con:value>finish.html?login=test&amp;password=testPwd</con:value><con:style>QUERY</con:style><con:default>finish.html?login=test&amp;password=testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userName</con:name><con:value>test</con:value><con:style>QUERY</con:style><con:default>test</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="84614ce7-ccf4-48f5-be00-451196bdd419"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="df97f3d9-6ef3-427f-bf78-e4ffaeb57d8a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="Deposit" path="deposit.do" id="b8971d32-a546-4426-871f-c17a4fb070be"><con:settings/><con:parameters><con:parameter><con:name>amount</con:name><con:value>100</con:value><con:style>QUERY</con:style><con:default>100</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>currency</con:name><con:value>810</con:value><con:style>QUERY</con:style><con:default>810</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderId</con:name><con:value>e5b59d3d-746b-4828-9da4-06f126e01b68</con:value><con:style>QUERY</con:style><con:default>e5b59d3d-746b-4828-9da4-06f126e01b68</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userName</con:name><con:value>testtest</con:value><con:style>QUERY</con:style><con:default>testtest</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="79555f2d-794c-42ae-a154-1f66bc377514"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="84d0c0ec-34d7-4fe9-a315-ca2b39e1170a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="amount" value="100" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="paymentOrderBinding" path="paymentOrderBinding.do" id="afa6f6c9-e449-4bad-b207-971d7c756fbb"><con:settings/><con:parameters><con:parameter><con:name>userName</con:name><con:value>username</con:value><con:style>QUERY</con:style><con:default>username</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>mdOrder</con:name><con:value>65401edc-3fa1-4112-87fd-a569ca69fb6a</con:value><con:style>QUERY</con:style><con:default>65401edc-3fa1-4112-87fd-a569ca69fb6a</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>bindingId</con:name><con:value>41954212-70a7-4eae-8430-90c1a87beda7</con:value><con:style>QUERY</con:style><con:default>41954212-70a7-4eae-8430-90c1a87beda7</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="ffd5d895-0ac4-4221-8da9-6c636ed9e26f"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="a9225347-9dee-4982-8653-8f55b018558a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/testpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="unBindCard" path="unBindCard.do" id="d1361263-c185-4a4a-b8d1-1db84b0db1b7"><con:settings/><con:parameters><con:parameter><con:name>userName</con:name><con:value>binding_api</con:value><con:style>QUERY</con:style><con:default>binding_api</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>bindingId</con:name><con:value>fd3afc57-c6d0-4e08-aaef-1b7cfeb093dc</con:value><con:style>QUERY</con:style><con:default>fd3afc57-c6d0-4e08-aaef-1b7cfeb093dc</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="92baad0c-7382-4c60-bbbc-a85d24ffbf13"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="78b71198-9875-4ee9-bff3-f7160e5c6781"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/testpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="bindUnbindCard" path="bindCard.do" id="769023f9-2b1f-4e1a-b3d0-8237ab716379"><con:settings/><con:parameters><con:parameter><con:name>userName</con:name><con:value>binding_api</con:value><con:style>QUERY</con:style><con:default>binding_api</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>bindingId</con:name><con:value>fd3afc57-c6d0-4e08-aaef-1b7cfeb093dc</con:value><con:style>QUERY</con:style><con:default>fd3afc57-c6d0-4e08-aaef-1b7cfeb093dc</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="1efa9d2c-1d25-49c0-8288-fbf9d8127957"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="e863fc9f-ae36-4953-aff7-3b48022d5fe4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="getBindings" path="getBindings.do" id="c070ac45-6540-43d2-a7a7-5deb5fb9590d"><con:settings/><con:parameters><con:parameter><con:name>userName</con:name><con:value>binding_api</con:value><con:style>QUERY</con:style><con:default>binding_api</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>testPwd</con:value><con:style>QUERY</con:style><con:default>testPwd</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>clientId</con:name><con:value>client</con:value><con:style>QUERY</con:style><con:default>client</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="8da8d0ed-a9ed-439d-a3f0-3883649bafe3"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="49501527-5e67-49a6-aff3-75eef1765756"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/testpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="paymentOrder" path="paymentorder.do" id="9f261a41-20b9-4ec3-b265-cb5abefe951d"><con:settings/><con:parameters><con:parameter><con:name>userName</con:name><con:value>login</con:value><con:style>QUERY</con:style><con:default>login</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>password</con:value><con:style>QUERY</con:style><con:default>password</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>MDORDER</con:name><con:value>0d4b02cb-5147-4232-9012-4d38c743ahr6</con:value><con:style>QUERY</con:style><con:default>0d4b02cb-5147-4232-9012-4d38c743ahr6</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>$PAN</con:name><con:value>5555555555555599</con:value><con:style>QUERY</con:style><con:default>5555555555555599</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>$CVC</con:name><con:value>123</con:value><con:style>QUERY</con:style><con:default>123</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>YYYY</con:name><con:value>2015</con:value><con:style>QUERY</con:style><con:default>2015</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>MM</con:name><con:value>12</con:value><con:style>QUERY</con:style><con:default>12</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>TEXT</con:name><con:value>Card Holder</con:value><con:style>QUERY</con:style><con:default>Card Holder</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>language</con:name><con:value>ru</con:value><con:style>QUERY</con:style><con:default>ru</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>jsonParams</con:name><con:value>{"eci":"07"}</con:value><con:style>QUERY</con:style><con:default>{"eci":"07"}</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="e931fec9-32c9-48a4-8aa6-b04c5eed335f"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=ISO-8859-1</con:mediaType><con:status>400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=ISO-8859-1</con:mediaType><con:status>400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="bec6dd6e-2f5d-426d-a6d9-9c38b24e4c0d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="jsonParams" value="{&quot;orderDescription&quot;:&quot;1234324357&quot;}"/>
  <con:entry key="userName" value="test"/>
  <con:entry key="password" value="testPwd"/>
</con:parameters></con:request></con:method></con:resource></con:interface><con:testSuite name="test-cases" id="6c8f732c-2154-4d32-8f2e-deb5edf48577"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="register" searchProperties="true" id="01dd67ce-544e-445f-a08e-928be02eb2d5" disabled="true"><con:settings/><con:testStep type="transfer" name="propTransfer" id="c6f2a962-dde2-46b7-9c04-06a01d085571"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>username</con:name><con:sourceType>username</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>username</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>pwd</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false"><con:name>Endpoint</con:name><con:sourceType>EndPoint</con:sourceType><con:sourceStep>#Project#</con:sourceStep><con:targetType>EP</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="generateOrderNumberScript" id="d571cd01-2ffa-40a6-bdd0-19e04a435b62"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import java.lang.String;
import org.codehaus.groovy.runtime.TimeCategory;
import org.apache.commons.lang.RandomStringUtils;
import org.apache.commons.lang.RandomStringUtils;
import groovy.json.JsonBuilder;
import groovy.json.JsonSlurper;
import groovy.json.JsonOutput;
import java.security.MessageDigest;

long curTime = System.currentTimeMillis();

String curStringDate = new SimpleDateFormat("yyyyMMddhhmmss").format(curTime);

curTime2 = curTime.toString();

def s4 =  curTime2.substring(curTime2.length() -3,curTime2.length());

curStringDate= curStringDate+s4;
def propertiesRegister = testRunner.testCase.getTestStepByName( "Properties");
propertiesRegister.setPropertyValue( "OrderNumber", curStringDate);</script></con:config></con:testStep><con:testStep type="properties" name="Properties" id="71cffa03-614f-4a42-9c66-3c56c86208a8"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>OrderNumber</con:name><con:value>20131121121708308</con:value></con:property><con:property><con:name>data</con:name><con:value>{"formUrl":"https://test.paymentgate.ru/devpayment/merchants/test/payment_ru.html?mdOrder=5d75114c-5824-4f51-914f-0bed08b0952a","orderId":"5d75114c-5824-4f51-914f-0bed08b0952a"}</con:value></con:property><con:property><con:name>orderId</con:name><con:value>5d75114c-5824-4f51-914f-0bed08b0952a</con:value></con:property><con:property><con:name>EP</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="PropertyTransfer" id="7090606a-310e-4fd2-b968-16a54fca9818"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>username</con:name><con:sourceType>username</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>registerOrder</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>registerOrder</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>orderNumber</con:name><con:sourceType>OrderNumber</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>orderNumber</con:targetType><con:targetStep>registerOrder</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="registerOrder" id="4c234f4c-ee61-4677-956e-8781f82d4904"><con:settings/><con:config service="AlfaRestApi" resourcePath="/register.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="registerOrder" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:assertion type="Simple Contains" name="Contains" id="0fa7a07a-1d12-40e8-b320-7807863bd588"><con:configuration><token>"orderId"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderNumber" value="20131121121708308"/>
  <con:entry key="userName" value="test"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer" id="8efdcb2e-fac9-4f3e-b12f-610d53b069fb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>data</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>registerOrder</con:sourceStep><con:targetType>data</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="parseData" id="947b19ec-ab89-4d7f-9ecc-dc7c992916a7"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import groovy.json.JsonSlurper;

def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "Properties");

def registerString			= propertiesRegisterTransfer.getPropertyValue( "data" );
log.info registerString	;
def jsonObj = new JsonSlurper().parseText( registerString);
def String orderId = jsonObj.orderId;

log.info orderId;

propertiesRegisterTransfer.setPropertyValue( "orderId", orderId);
</script></con:config></con:testStep><con:testStep type="transfer" name="orderParamsTransfer" id="d7af3c4a-4363-49de-8e16-5e39e7989a3f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderId</con:name><con:sourceType>orderId</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>orderId</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false" transferToAll="false" entitize="false"><con:name>ordernum</con:name><con:sourceType>OrderNumber</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>orderNumber</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>orderId</con:name><con:value>5d75114c-5824-4f51-914f-0bed08b0952a</con:value></con:property><con:property><con:name>returnUrl</con:name><con:value/></con:property><con:property><con:name>amount</con:name><con:value/></con:property><con:property><con:name>currency</con:name><con:value/></con:property><con:property><con:name>language</con:name><con:value/></con:property><con:property><con:name>EndPoint</con:name><con:value/></con:property><con:property><con:name>orderNumber</con:name><con:value>20131121121708308</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Payment" searchProperties="true" id="8b9da7dd-6b0e-4d90-b446-a57675e0f6ab" disabled="true"><con:settings/><con:testStep type="properties" name="PropertiesPayment" id="124572a7-da54-47a3-a3b0-10094496b489"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>data</con:name><con:value>{"info":"  ,  ...","acsUrl":"https://test.paymentgate.ru/acs/auth/start.do","paReq":"eJxVUV1TwjAQ/CudvksSqKDMNUyxODBOERVm9LGmkRbaFJJWK7/epB8CD5nZvdzd3u3BpMpS65tL\nleTCtUkP2xYXLI8SsXXtzfrx5s6eUFjHknP/jbNScgoBVyrcciuJXDtT2x6xKay8V36k0HaiulGv\nD6ijukSyOBQFhZAdp4sldfqjIcaAWgoZlwufYhNqIIgw43TNVWFlbTGgOgYsL0Uhf+nQGQDqCJQy\npaJMU0AGATpLrkqDlK6skogGvvfTvNnp2X/Bgb93gl3gLHeeC8hkQBQWnPYxGRBCHIvgMRmNsdaq\n4xBmRpKSevwGw8FIeBcflwHQtkntajdxx4BXh1xwnaGt+scQccWuF7cO7QZ6BPMJ6LzSw9x4ygpt\n2fTrfnMKq3T+8RRX2ZJNP98PQsXFfhYcjdN1khFNtF/kljSqhgAybVB7RNQeWKOrw/8BHtu7Fw==","termUrl":"https://test.paymentgate.ru:443/devpayment/rest/finish3ds.do","errorCode":0}</con:value></con:property><con:property><con:name>errorCode</con:name><con:value>0</con:value></con:property><con:property><con:name>info</con:name><con:value>  ,  ...</con:value></con:property><con:property><con:name>redirect</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>paReq</con:name><con:value>eJxVUV1TwjAQ/CudvksSqKDMNUyxODBOERVm9LGmkRbaFJJWK7/epB8CD5nZvdzd3u3BpMpS65tL
leTCtUkP2xYXLI8SsXXtzfrx5s6eUFjHknP/jbNScgoBVyrcciuJXDtT2x6xKay8V36k0HaiulGv
D6ijukSyOBQFhZAdp4sldfqjIcaAWgoZlwufYhNqIIgw43TNVWFlbTGgOgYsL0Uhf+nQGQDqCJQy
paJMU0AGATpLrkqDlK6skogGvvfTvNnp2X/Bgb93gl3gLHeeC8hkQBQWnPYxGRBCHIvgMRmNsdaq
4xBmRpKSevwGw8FIeBcflwHQtkntajdxx4BXh1xwnaGt+scQccWuF7cO7QZ6BPMJ6LzSw9x4ygpt
2fTrfnMKq3T+8RRX2ZJNP98PQsXFfhYcjdN1khFNtF/kljSqhgAybVB7RNQeWKOrw/8BHtu7Fw==</con:value></con:property><con:property><con:name>termUrl</con:name><con:value>https://test.paymentgate.ru:443/devpayment/rest/finish3ds.do</con:value></con:property><con:property><con:name>mdOrder</con:name><con:value/></con:property><con:property><con:name>acsUrlText</con:name><con:value>https://test.paymentgate.ru/acs/auth/start.do</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="RegisterTransfer" id="3a0b3909-d076-4515-9d92-c44d3bd12f78"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>MDorder</con:name><con:sourceType>mdOrder</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>MDORDER</con:targetType><con:targetStep>Payment</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false"><con:name>mdOrder</con:name><con:sourceType>mdOrder</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>mdOrder</con:targetType><con:targetStep>PropertiesPayment</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>login</con:name><con:sourceType>user</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>Payment</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>Payment</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Payment" id="ed6f2c47-06c8-4aa5-8fb4-421f0df891b5"><con:settings/><con:config service="AlfaRestApi" resourcePath="/paymentorder.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Payment" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:assertion type="Simple Contains" name="Contains" id="5c89baf0-9f69-41bc-b0c7-37fc5837371f"><con:configuration><token>"errorCode":0</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="MDORDER" value=""/>
  <con:entry key="jsonParams" value="{&quot;status&quot;:&quot;3dsec&quot;}"/>
  <con:entry key="TEXT" value="Nataly Bianko"/>
  <con:entry key="userName" value="test"/>
  <con:entry key="password" value="testPwd"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer" id="9dff7106-65fa-4ae3-b67d-b53593a817a5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>data</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Payment</con:sourceStep><con:sourcePath>data/text()</con:sourcePath><con:targetType>data</con:targetType><con:targetStep>PropertiesPayment</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="dataParser" id="bce2877a-3238-43b3-b3f6-edb714a23c94"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import org.codehaus.groovy.runtime.TimeCategory;
import org.apache.commons.lang.RandomStringUtils;
import groovy.json.JsonBuilder;
import groovy.json.JsonSlurper;
import groovy.json.JsonOutput;
import java.security.MessageDigest;

def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "PropertiesPayment");

def registerString			= propertiesRegisterTransfer.getPropertyValue( "data" );
log.info registerString	;

def jsonObj = new JsonSlurper().parseText( registerString);
def String info = jsonObj.info;
def String redirect = jsonObj.redirect;
def String errorCode = jsonObj.errorCode;

//---  ACS--------------------//
def String PaReq = jsonObj.paReq;
def String TermUrl = jsonObj.termUrl;
//---------------------------------------------------//

propertiesRegisterTransfer.setPropertyValue( "errorCode", errorCode);
propertiesRegisterTransfer.setPropertyValue( "info", info);
propertiesRegisterTransfer.setPropertyValue( "redirect", redirect);
propertiesRegisterTransfer.setPropertyValue( "paReq", PaReq);
propertiesRegisterTransfer.setPropertyValue( "termUrl", TermUrl);
if(TermUrl == null)
testRunner.gotoStepByName( "transferProperties")
else
testRunner.gotoStepByName("PaReqScript");
</script></con:config></con:testStep><con:testStep type="groovy" name="PaReqScript" id="3256801a-bbfd-433f-acfb-c3d328cd7f29"><con:settings/><con:config><script>import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import static org.hamcrest.CoreMatchers.*;
import org.apache.commons.io.FileUtils;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import java.util.*;
import java.text.*;
import org.codehaus.groovy.runtime.TimeCategory;
import org.apache.commons.lang.RandomStringUtils;
import groovy.json.JsonBuilder;
import groovy.json.JsonSlurper;
import groovy.json.JsonOutput;
import java.security.MessageDigest;

//--------------------------------------------------
def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "PropertiesPayment");
def paReq = propertiesRegisterTransfer.getPropertyValue( "paReq");
def termUrl = propertiesRegisterTransfer.getPropertyValue( "termUrl");
def mdOrder = propertiesRegisterTransfer.getPropertyValue( "mdOrder");
def acsUrlText = propertiesRegisterTransfer.getPropertyValue( "acsUrlText");

log.info paReq;

 WebDriver driver = new FirefoxDriver();
 
driver.get("https://test.paymentgate.ru/testpayment/merchants/test/test_3dsec.html");
acsUrlText
driver.findElement(By.id("acsUrlText")).clear();
driver.findElement(By.id("acsUrlText")).sendKeys(acsUrlText);
driver.findElement(By.id("termUrlText")).clear();
driver.findElement(By.id("termUrlText")).sendKeys(termUrl);
driver.findElement(By.id("mdText")).clear();
driver.findElement(By.id("mdText")).sendKeys(mdOrder);
driver.findElement(By.id("paReqText")).clear();
driver.findElement(By.id("paReqText")).sendKeys(paReq);

driver.findElement(By.id("redirectToAcs")).click();

Thread.sleep(1000);

WebElement pass = driver.findElement(By.id("password"));
pass.sendKeys("12345678");
driver.findElement(By.id("submit_id")).click();
driver.quit();



</script></con:config></con:testStep><con:testStep type="transfer" name="transferProperties" id="c87ab6fb-cd9a-49d1-ac15-9baadb032cf4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:properties><con:property><con:name>user</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>mdOrder</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="registerPreOrder" searchProperties="true" id="5c7c5192-e115-43a4-b75f-a9978fca82c0" disabled="true"><con:settings/><con:testStep type="transfer" name="propTransfer" id="8a455ef6-7ddb-4eca-b109-44195446e5b8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>username</con:name><con:sourceType>username</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>username</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>pwd</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false" transferToAll="false" entitize="false"><con:name>Endpoint</con:name><con:sourceType>EndPoint</con:sourceType><con:sourceStep>#Project#</con:sourceStep><con:targetType>EP</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>amount</con:name><con:sourceType>amount</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>EP</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false"><con:name>cur</con:name><con:sourceType>currency</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>currency</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" transferChildNodes="false" useXQuery="false"><con:name>lang</con:name><con:sourceType>language</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>lang</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="generateOrderNumberScript" id="573d9748-f04c-4029-81af-1423c5fea87a"><con:settings/><con:config><script>
import java.text.*;
import java.util.*;


long curTime = System.currentTimeMillis();

String curStringDate = new SimpleDateFormat("dd.MM.yyyy.hh.mm.ss").format(curTime);
log.info curStringDate;

def propertiesRegister = testRunner.testCase.getTestStepByName( "Properties");
propertiesRegister.setPropertyValue( "OrderNumber", curStringDate);</script></con:config></con:testStep><con:testStep type="properties" name="Properties" id="0ee1aa58-483d-4af2-a508-039d3d4e4e9e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>OrderNumber</con:name><con:value>10.10.2013.04.11.34</con:value></con:property><con:property><con:name>data</con:name><con:value>{"formUrl":"https://test.paymentgate.ru/devpayment/merchants/rbs/payment_ru.html?mdOrder=05711bcd-af87-46ae-9929-98ba5129f185","orderId":"05711bcd-af87-46ae-9929-98ba5129f185"}</con:value></con:property><con:property><con:name>orderId</con:name><con:value>05711bcd-af87-46ae-9929-98ba5129f185</con:value></con:property><con:property><con:name>EP</con:name><con:value>1000</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>lang</con:name><con:value>ru</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="PropertyTransfer" id="434f8ed5-5b38-4847-be06-416876ac9df7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderNum</con:name><con:sourceType>OrderNumber</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>orderNumber</con:targetType><con:targetStep>registerPreAuth</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" ignoreEmpty="false"><con:name>amount</con:name><con:sourceType>EP</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>amount</con:targetType><con:targetStep>registerPreAuth</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" transferChildNodes="false" useXQuery="false" ignoreEmpty="false"><con:name>usr</con:name><con:sourceType>username</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>registerPreAuth</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>registerPreAuth</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>lang</con:name><con:sourceType>lang</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>language</con:targetType><con:targetStep>registerPreAuth</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>curr</con:name><con:sourceType>currency</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>currency</con:targetType><con:targetStep>registerPreAuth</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="registerPreAuth" id="da6be35e-119e-4579-b1d4-86f2cf16daac"><con:settings/><con:config service="AlfaRestApi" resourcePath="/registerPreAuth.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="registerPreAuth" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="amount" value="1000"/>
  <con:entry key="orderNumber" value="10.10.2013.04.11.34"/>
  <con:entry key="password" value="testPwd"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer" id="3e9adee0-87af-43dc-b266-db04bc68d16e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>data</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>registerPreAuth</con:sourceStep><con:targetType>data</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="parseData" id="6ff689bd-4558-4e9a-b194-7a3400e0ca17"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import groovy.json.JsonSlurper;

def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "Properties");

def registerString			= propertiesRegisterTransfer.getPropertyValue( "data" );
log.info registerString	;
def jsonObj = new JsonSlurper().parseText( registerString);
def String orderId = jsonObj.orderId;

log.info orderId;

propertiesRegisterTransfer.setPropertyValue( "orderId", orderId);
</script></con:config></con:testStep><con:testStep type="transfer" name="orderParamsTransfer" id="db9a9278-0efc-4887-9e2e-0ce5e6f5c0cc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderId</con:name><con:sourceType>orderId</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>orderId</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false" transferToAll="false" entitize="false"><con:name>ordernum</con:name><con:sourceType>OrderNumber</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>orderNumber</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>orderId</con:name><con:value>05711bcd-af87-46ae-9929-98ba5129f185</con:value></con:property><con:property><con:name>returnUrl</con:name><con:value/></con:property><con:property><con:name>amount</con:name><con:value>1000</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>language</con:name><con:value>ru</con:value></con:property><con:property><con:name>EndPoint</con:name><con:value/></con:property><con:property><con:name>orderNumber</con:name><con:value>10.10.2013.04.11.34</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="deposite" searchProperties="true" id="d1854ae3-7cb5-4000-97d1-e9aa54b14661" disabled="true"><con:settings/><con:testStep type="transfer" name="PropertyTransfer" id="151ee912-5d28-4075-8bc1-6919e03c594c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderId</con:name><con:sourceType>orderId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>orderId</con:targetType><con:targetStep>deposit</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" transferToAll="false" useXQuery="false" ignoreEmpty="false"><con:name>lang</con:name><con:sourceType>lang</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>language</con:targetType><con:targetStep>deposit</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>curr</con:name><con:sourceType>currency</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>currency</con:targetType><con:targetStep>deposit</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>usr</con:name><con:sourceType>username</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>deposit</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>deposit</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>am</con:name><con:sourceType>amount</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>amount</con:targetType><con:targetStep>deposit</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="deposit" id="73ffa8ca-13e6-406e-b538-e4a593fc36ae"><con:settings/><con:config service="AlfaRestApi" resourcePath="/deposit.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="deposit" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:assertion type="Simple Contains" name="Contains" id="719b96d5-4cf4-40a7-ab12-48b3811e4543"><con:configuration><token>"errorCode":"0"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="userName" value="test"/>
  <con:entry key="orderId" value="31aa2b05-8827-4207-b388-f0bcc70583c6"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>orderId</con:name><con:value>31aa2b05-8827-4207-b388-f0bcc70583c6</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>amount</con:name><con:value>1000</con:value></con:property><con:property><con:name>lang</con:name><con:value>ru</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="reverse" searchProperties="true" disabled="true" id="20f82901-6054-4f4d-8618-be9bbf268a25"><con:settings/><con:testStep type="transfer" name="PropertyTransfer" id="82cb784b-2ec3-4ef0-bb69-09c303e84b8d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderId</con:name><con:sourceType>orderId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>orderId</con:targetType><con:targetStep>reverse</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" transferToAll="false" useXQuery="false" ignoreEmpty="false"><con:name>lang</con:name><con:sourceType>lang</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>language</con:targetType><con:targetStep>reverse</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>curr</con:name><con:sourceType>currency</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>currency</con:targetType><con:targetStep>reverse</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>usr</con:name><con:sourceType>username</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>reverse</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>reverse</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>am</con:name><con:sourceType>amount</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>amount</con:targetType><con:targetStep>reverse</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="reverse" id="eb339e02-180c-43db-a87e-626c9b9d247e"><con:settings/><con:config service="AlfaRestApi" resourcePath="/reverse.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="reverse" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:assertion type="Simple Contains" name="Contains" id="00bae170-feb7-456d-80a6-f260841579d2"><con:configuration><token>"errorCode":"0"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="amount" value="1000" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>orderId</con:name><con:value>31aa2b05-8827-4207-b388-f0bcc70583c6</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>amount</con:name><con:value>1000</con:value></con:property><con:property><con:name>lang</con:name><con:value>ru</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="refund" searchProperties="true" disabled="true" id="a2f5e0b8-5d92-4b9c-9bf3-ea0512f8c24e"><con:settings/><con:testStep type="transfer" name="PropertyTransfer" id="ef755068-512e-4c3e-87c1-821adc3f60fb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderId</con:name><con:sourceType>orderId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>orderId</con:targetType><con:targetStep>Refund</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" transferToAll="false" useXQuery="false" ignoreEmpty="false"><con:name>lang</con:name><con:sourceType>lang</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>language</con:targetType><con:targetStep>Refund</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>curr</con:name><con:sourceType>currency</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>currency</con:targetType><con:targetStep>Refund</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>usr</con:name><con:sourceType>username</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>Refund</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>Refund</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>am</con:name><con:sourceType>amount</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>amount</con:targetType><con:targetStep>Refund</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Refund" id="4a7a1540-5a38-454c-8908-f68e49ae42ac"><con:settings/><con:config service="AlfaRestApi" resourcePath="/refund.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Refund" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="amount" value="500" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>orderId</con:name><con:value>31aa2b05-8827-4207-b388-f0bcc70583c6</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>amount</con:name><con:value>1000</con:value></con:property><con:property><con:name>lang</con:name><con:value>ru</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getOrderStatus" searchProperties="true" disabled="true" id="c8d0d140-3a97-4fc1-8301-bd0f2a43e9e6"><con:settings/><con:testStep type="properties" name="properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>data</con:name><con:value>{"expiration":"201512","cardholderName":"a morr","depositAmount":100,"currency":"810","approvalCode":"123456","authCode":2,"ErrorCode":"0","ErrorMessage":"","OrderStatus":2,"OrderNumber":"201391016254553","Pan":"411111**1111","Amount":100,"Ip":"212.5.125.194"}</con:value></con:property><con:property><con:name>expiration</con:name><con:value>201512</con:value></con:property><con:property><con:name>cardholderName</con:name><con:value>a morr</con:value></con:property><con:property><con:name>depositAmount</con:name><con:value>100</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>approvalCode</con:name><con:value>123456</con:value></con:property><con:property><con:name>authCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ErrorCode</con:name><con:value>0</con:value></con:property><con:property><con:name>ErrorMessage</con:name><con:value></con:value></con:property><con:property><con:name>OrderStatus</con:name><con:value>2</con:value></con:property><con:property><con:name>OrderNumber</con:name><con:value>201391016254553</con:value></con:property><con:property><con:name>Pan</con:name><con:value>411111**1111</con:value></con:property><con:property><con:name>Amount</con:name><con:value>100</con:value></con:property><con:property><con:name>Ip</con:name><con:value>212.5.125.194</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="detailTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderid</con:name><con:sourceType>orderId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>orderId</con:targetType><con:targetStep>getOrderStatus</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>lang</con:name><con:sourceType>language</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>language</con:targetType><con:targetStep>getOrderStatus</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false"><con:name>usr</con:name><con:sourceType>userName</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>getOrderStatus</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>getOrderStatus</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getOrderStatus"><con:settings/><con:config service="AlfaRestApi" resourcePath="/getOrderStatus.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOrderStatus" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="userName" value="test"/>
  <con:entry key="orderId" value="31aa2b05-8827-4207-b388-f0bcc70583c6"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>data</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getOrderStatus</con:sourceStep><con:targetType>data</con:targetType><con:targetStep>properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="GroovyScript"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import groovy.json.JsonSlurper;

def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "properties");

def registerString			= propertiesRegisterTransfer.getPropertyValue( "data" );
log.info registerString	;
def jsonObj = new JsonSlurper().parseText( registerString);
def String orderId = jsonObj.orderId;
def String expiration = jsonObj.expiration;
def String cardholderName = jsonObj.cardholderName;
def String depositAmount = jsonObj.depositAmount;
def String currency = jsonObj.currency;
def String approvalCode = jsonObj.approvalCode;
def String authCode = jsonObj.authCode;
def String ErrorCode = jsonObj.ErrorCode;
def String ErrorMessage = jsonObj.ErrorMessage;
def String OrderStatus = jsonObj.OrderStatus;
def String OrderNumber = jsonObj.OrderNumber;
def String Pan = jsonObj.Pan;
def String Amount = jsonObj.Amount;
def String Ip = jsonObj.Ip;


log.info orderId;
log.info expiration;
log.info cardholderName;
log.info depositAmount;
log.info currency;
log.info approvalCode;
log.info authCode;
log.info ErrorCode;
log.info ErrorMessage;
log.info OrderStatus;
log.info OrderNumber;
log.info Pan;
log.info Amount;
log.info Ip;


propertiesRegisterTransfer.setPropertyValue( "expiration", expiration);
propertiesRegisterTransfer.setPropertyValue( "cardholderName", cardholderName);
propertiesRegisterTransfer.setPropertyValue( "depositAmount", depositAmount);
propertiesRegisterTransfer.setPropertyValue( "currency", currency);
propertiesRegisterTransfer.setPropertyValue( "approvalCode", approvalCode);
propertiesRegisterTransfer.setPropertyValue( "authCode", authCode);
propertiesRegisterTransfer.setPropertyValue( "ErrorCode", ErrorCode);
propertiesRegisterTransfer.setPropertyValue( "ErrorMessage", ErrorMessage);
propertiesRegisterTransfer.setPropertyValue( "OrderStatus", OrderStatus);
propertiesRegisterTransfer.setPropertyValue( "OrderNumber", OrderNumber);
propertiesRegisterTransfer.setPropertyValue( "Pan", Pan);
propertiesRegisterTransfer.setPropertyValue( "Amount", Amount);
propertiesRegisterTransfer.setPropertyValue( "Ip", Ip);
</script></con:config></con:testStep><con:testStep type="transfer" name="detailsTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>expiry</con:name><con:sourceType>expiration</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>expiry</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>cardHolder</con:name><con:sourceType>cardholderName</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>cardholderName</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>depositAmount</con:name><con:sourceType>depositAmount</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>depositAmount</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>currency</con:name><con:sourceType>currency</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>currency</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>approvalCode</con:name><con:sourceType>approvalCode</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>approvalCode</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>authCode</con:name><con:sourceType>authCode</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>authCode</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>ErrorCode</con:name><con:sourceType>ErrorCode</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>ErrorCode</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ErrorMessage</con:name><con:sourceType>ErrorMessage</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>ErrorMessage</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>OrderStatus</con:name><con:sourceType>OrderStatus</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>orderStatus</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>OrderNumber</con:name><con:sourceType>OrderNumber</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>OrderNumber</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>pan</con:name><con:sourceType>Pan</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>Pan</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>amount</con:name><con:sourceType>Amount</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>amount</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" ignoreEmpty="false" transferToAll="false"><con:name>ip</con:name><con:sourceType>Ip</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>ip</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>orderId</con:name><con:value>31aa2b05-8827-4207-b388-f0bcc70583c6</con:value></con:property><con:property><con:name>language</con:name><con:value>ru</con:value></con:property><con:property><con:name>userName</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>expiry</con:name><con:value>201512</con:value></con:property><con:property><con:name>cardholderName</con:name><con:value>a morr</con:value></con:property><con:property><con:name>depositAmount</con:name><con:value>100</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>approvalCode</con:name><con:value>123456</con:value></con:property><con:property><con:name>authCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ErrorCode</con:name><con:value>0</con:value></con:property><con:property><con:name>ErrorMessage</con:name><con:value></con:value></con:property><con:property><con:name>orderStatus</con:name><con:value>2</con:value></con:property><con:property><con:name>OrderNumber</con:name><con:value>201391016254553</con:value></con:property><con:property><con:name>Pan</con:name><con:value>411111**1111</con:value></con:property><con:property><con:name>ip</con:name><con:value>212.5.125.194</con:value></con:property><con:property><con:name>amount</con:name><con:value>100</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getOrderStatusExtended" searchProperties="true" id="2662187f-9a42-4e28-a47d-eb17dcb83ea5" disabled="true"><con:settings/><con:testStep type="properties" name="properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>data</con:name><con:value>{"errorCode":"0","errorMessage":"","orderNumber":"201391016254553","orderStatus":2,"actionCode":0,"actionCodeDescription":"  ","amount":100,"currency":"810","date":1381407969649,"orderDescription":"null","ip":"212.5.125.194","merchantOrderParams":[],"attributes":[{"name":"mdOrder","value":"31aa2b05-8827-4207-b388-f0bcc70583c6"}],"cardAuthInfo":{"expiration":"201512","cardholderName":"a morr","approvalCode":"123456","secureAuthInfo":{"eci":5,"threeDSInfo":{"xid":"MDAwMDAwMDEzODE0MDc5Njk5MzI=","cavv":"AAABB3cCgBOBQHlwKAAAAAAAAAA="}},"pan":"411111**1111"},"authDateTime":1381407974524,"terminalId":"111113","authRefNum":"111111111111","paymentAmountInfo":{"paymentState":"DEPOSITED","approvedAmount":100,"depositedAmount":100,"refundedAmount":0},"bankInfo":{"bankName":"TEST CARD","bankCountryCode":"RU","bankCountryName":""}}</con:value></con:property><con:property><con:name>ErrorCode</con:name><con:value>0</con:value></con:property><con:property><con:name>ErrorMessage</con:name><con:value></con:value></con:property><con:property><con:name>OrderNumber</con:name><con:value>201391016254553</con:value></con:property><con:property><con:name>OrderStatus</con:name><con:value>2</con:value></con:property><con:property><con:name>ActionCode</con:name><con:value>0</con:value></con:property><con:property><con:name>actionCodeDescription</con:name><con:value>  </con:value></con:property><con:property><con:name>Amount</con:name><con:value>100</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>date</con:name><con:value>1381407969649</con:value></con:property><con:property><con:name>orderDescription</con:name><con:value>null</con:value></con:property><con:property><con:name>Ip</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>authDateTime</con:name><con:value>1381407974524</con:value></con:property><con:property><con:name>terminalId</con:name><con:value>111113</con:value></con:property><con:property><con:name>authRefNum</con:name><con:value>111111111111</con:value></con:property><con:property><con:name>merchantOrderParams</con:name><con:value>[]</con:value></con:property><con:property><con:name>attributes</con:name><con:value>[{name=mdOrder, value=31aa2b05-8827-4207-b388-f0bcc70583c6}]</con:value></con:property><con:property><con:name>cardAuthInfo</con:name><con:value>{cardholderName=a morr, expiration=201512, approvalCode=123456, pan=411111**1111, secureAuthInfo={eci=5, threeDSInfo={xid=MDAwMDAwMDEzODE0MDc5Njk5MzI=, cavv=AAABB3cCgBOBQHlwKAAAAAAAAAA=}}}</con:value></con:property><con:property><con:name>paymentAmountInfo</con:name><con:value>{depositedAmount=100, approvedAmount=100, paymentState=DEPOSITED, refundedAmount=0}</con:value></con:property><con:property><con:name>bankInfo</con:name><con:value>{bankCountryCode=RU, bankCountryName=, bankName=TEST CARD}</con:value></con:property><con:property><con:name>secureAuthInfo</con:name><con:value>{eci=5, threeDSInfo={xid=MDAwMDAwMDEzODE0MDc5Njk5MzI=, cavv=AAABB3cCgBOBQHlwKAAAAAAAAAA=}}</con:value></con:property><con:property><con:name>threeDSInfo</con:name><con:value>{xid=MDAwMDAwMDEzODE0MDc5Njk5MzI=, cavv=AAABB3cCgBOBQHlwKAAAAAAAAAA=}</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="detailTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>orderid</con:name><con:sourceType>orderId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>orderId</con:targetType><con:targetStep>getOrderStatusExtended</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>lang</con:name><con:sourceType>language</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>language</con:targetType><con:targetStep>getOrderStatusExtended</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false"><con:name>usr</con:name><con:sourceType>userName</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>getOrderStatusExtended</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>getOrderStatusExtended</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getOrderStatusExtended"><con:settings/><con:config service="AlfaRestApi" resourcePath="/getOrderStatusExtended.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getOrderStatusExtended" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="userName" value="test"/>
  <con:entry key="password" value="testPwd"/>
  <con:entry key="orderId" value="31aa2b05-8827-4207-b388-f0bcc70583c6"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>data</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getOrderStatusExtended</con:sourceStep><con:targetType>data</con:targetType><con:targetStep>properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="GroovyScript"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import groovy.json.JsonSlurper;

def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "properties");

def registerString			= propertiesRegisterTransfer.getPropertyValue( "data" );

def jsonObj = new JsonSlurper().parseText( registerString);

def String ErrorCode = jsonObj.errorCode;
def String ErrorMessage = jsonObj.errorMessage;
def String OrderNumber = jsonObj.orderNumber;
def String OrderStatus = jsonObj.orderStatus;
def String ActionCode = jsonObj.actionCode;
def String actionCodeDescription = jsonObj.actionCodeDescription;
def String Amount = jsonObj.amount;
def String currency = jsonObj.currency;
def String date = jsonObj.date;
def String orderDescription = jsonObj.orderDescription;
def String Ip = jsonObj.Ip;
def String authDateTime = jsonObj.authDateTime;
def String terminalId = jsonObj.terminalId;
def String authRefNum = jsonObj.authRefNum;

//-----------------------------------------------------------
def String merchantOrderParams = jsonObj.merchantOrderParams;// 
def String attributes = jsonObj.attributes;// 
def String cardAuthInfo = jsonObj.cardAuthInfo;//  
def String paymentAmountInfo = jsonObj.paymentAmountInfo;//  
def String bankInfo = jsonObj.bankInfo;//  
def String secureAuthInfo = jsonObj.cardAuthInfo.secureAuthInfo;//  
def String threeDSInfo =jsonObj.cardAuthInfo.secureAuthInfo.threeDSInfo;//  
//"attributes":[{"name":"mdOrder","value":"31aa2b05-8827-4207-b388-f0bcc70583c6"}],"cardAuthInfo":{"expiration":"201512","cardholderName":"a morr","approvalCode":"123456","secureAuthInfo":{"eci":5,"threeDSInfo":{"xid":"MDAwMDAwMDEzODE0MDc5Njk5MzI=","cavv":"AAABB3cCgBOBQHlwKAAAAAAAAAA="}},"pan":"411111**1111"},"authDateTime":1381407974524,"terminalId":"111113","authRefNum":"111111111111","paymentAmountInfo":{"paymentState":"DEPOSITED","approvedAmount":100,"depositedAmount":100,"refundedAmount":0},"bankInfo":{"bankName":"TEST CARD","bank



//---------------------------------------------------------------

propertiesRegisterTransfer.setPropertyValue( "ErrorCode", ErrorCode);
propertiesRegisterTransfer.setPropertyValue( "ErrorMessage", ErrorMessage);
propertiesRegisterTransfer.setPropertyValue( "OrderNumber", OrderNumber);
propertiesRegisterTransfer.setPropertyValue( "OrderStatus", OrderStatus);
propertiesRegisterTransfer.setPropertyValue( "ActionCode", ActionCode);
propertiesRegisterTransfer.setPropertyValue( "actionCodeDescription", actionCodeDescription);
propertiesRegisterTransfer.setPropertyValue( "Amount", Amount);
propertiesRegisterTransfer.setPropertyValue( "currency", currency);
propertiesRegisterTransfer.setPropertyValue( "date", date);
propertiesRegisterTransfer.setPropertyValue( "orderDescription", orderDescription);
propertiesRegisterTransfer.setPropertyValue( "Ip", Ip);
propertiesRegisterTransfer.setPropertyValue( "authDateTime", authDateTime);
propertiesRegisterTransfer.setPropertyValue( "terminalId", terminalId);
propertiesRegisterTransfer.setPropertyValue( "authRefNum", authRefNum);
//---------------------------------------------------------------------------------------
propertiesRegisterTransfer.setPropertyValue( "merchantOrderParams", merchantOrderParams);
propertiesRegisterTransfer.setPropertyValue( "attributes", attributes);
propertiesRegisterTransfer.setPropertyValue( "cardAuthInfo", cardAuthInfo);
propertiesRegisterTransfer.setPropertyValue( "paymentAmountInfo", paymentAmountInfo);
propertiesRegisterTransfer.setPropertyValue( "bankInfo", bankInfo);
propertiesRegisterTransfer.setPropertyValue( "secureAuthInfo", secureAuthInfo);
propertiesRegisterTransfer.setPropertyValue( "threeDSInfo", threeDSInfo);

</script></con:config></con:testStep><con:testStep type="transfer" name="detailsTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>errorCode</con:name><con:sourceType>ErrorCode</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>ErrorCode</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>errorMessage</con:name><con:sourceType>ErrorMessage</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>ErrorMessage</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>orderNumber</con:name><con:sourceType>OrderNumber</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>OrderNumber</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>orderStatus</con:name><con:sourceType>OrderStatus</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>orderStatus</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>actionCode</con:name><con:sourceType>ActionCode</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>actionCode</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>actionCodeDesc</con:name><con:sourceType>actionCodeDescription</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>actionCodeDescription</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>amount</con:name><con:sourceType>Amount</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>amount</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>currency</con:name><con:sourceType>currency</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>currency</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>date</con:name><con:sourceType>date</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>date</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>orderDesc</con:name><con:sourceType>orderDescription</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>orderDescription</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ip</con:name><con:sourceType>Ip</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>ip</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>authDateTime</con:name><con:sourceType>authDateTime</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>authDateTime</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>terminalId</con:name><con:sourceType>terminalId</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>terminalId</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>authRefNum</con:name><con:sourceType>authRefNum</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>authRefNum</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>merchantOrderParams</con:name><con:sourceType>merchantOrderParams</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>merchantOrderParams</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>attributes</con:name><con:sourceType>attributes</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>attributes</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>cardAuthInfo</con:name><con:sourceType>cardAuthInfo</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>cardAuthInfo</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>paymentAmountInfo</con:name><con:sourceType>paymentAmountInfo</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>paymentAmountInfo</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>bankInfo</con:name><con:sourceType>bankInfo</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>bankInfo</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>secur</con:name><con:sourceType>secureAuthInfo</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>security</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>3dsinfo</con:name><con:sourceType>threeDSInfo</con:sourceType><con:sourceStep>properties</con:sourceStep><con:targetType>3dsinfo</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>ErrorCode</con:name><con:value>0</con:value></con:property><con:property><con:name>ErrorMessage</con:name><con:value></con:value></con:property><con:property><con:name>OrderNumber</con:name><con:value>201391016254553</con:value></con:property><con:property><con:name>orderStatus</con:name><con:value>2</con:value></con:property><con:property><con:name>actionCode</con:name><con:value>0</con:value></con:property><con:property><con:name>actionCodeDescription</con:name><con:value>  </con:value></con:property><con:property><con:name>amount</con:name><con:value>100</con:value></con:property><con:property><con:name>currency</con:name><con:value>810</con:value></con:property><con:property><con:name>date</con:name><con:value>1381407969649</con:value></con:property><con:property><con:name>orderDescription</con:name><con:value>null</con:value></con:property><con:property><con:name>ip</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>authDateTime</con:name><con:value>1381407974524</con:value></con:property><con:property><con:name>terminalId</con:name><con:value>111113</con:value></con:property><con:property><con:name>authRefNum</con:name><con:value>111111111111</con:value></con:property><con:property><con:name>merchantOrderParams</con:name><con:value>[]</con:value></con:property><con:property><con:name>attributes</con:name><con:value>[{name=mdOrder, value=31aa2b05-8827-4207-b388-f0bcc70583c6}]</con:value></con:property><con:property><con:name>cardAuthInfo</con:name><con:value>{cardholderName=a morr, expiration=201512, approvalCode=123456, pan=411111**1111, secureAuthInfo={eci=5, threeDSInfo={xid=MDAwMDAwMDEzODE0MDc5Njk5MzI=, cavv=AAABB3cCgBOBQHlwKAAAAAAAAAA=}}}</con:value></con:property><con:property><con:name>paymentAmountInfo</con:name><con:value>{depositedAmount=100, approvedAmount=100, paymentState=DEPOSITED, refundedAmount=0}</con:value></con:property><con:property><con:name>bankInfo</con:name><con:value>{bankCountryCode=RU, bankCountryName=, bankName=TEST CARD}</con:value></con:property><con:property><con:name>orderId</con:name><con:value>31aa2b05-8827-4207-b388-f0bcc70583c6</con:value></con:property><con:property><con:name>language</con:name><con:value>ru</con:value></con:property><con:property><con:name>userName</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>security</con:name><con:value/></con:property><con:property><con:name>3dsinfo</con:name><con:value>{xid=MDAwMDAwMDEzODE0MDc5Njk5MzI=, cavv=AAABB3cCgBOBQHlwKAAAAAAAAAA=}</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="isEnrollment" searchProperties="true" id="83b72ab9-48cf-43a4-9f59-28d21e6f13ea" disabled="true"><con:settings/><con:testStep type="transfer" name="PropertiesTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>pan</con:name><con:sourceType>pan</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>pan</con:targetType><con:targetStep>isEnrollment</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>usr</con:name><con:sourceType>apiUserName</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>isEnrollment</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false"><con:name>pwd</con:name><con:sourceType>apiPasswd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>isEnrollment</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="isEnrollment"><con:settings/><con:config service="AlfaRestApi" resourcePath="/verifyEnrollment.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="isEnrollment" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="userName" value=""/>
  <con:entry key="password" value=""/>
  <con:entry key="pan" value=""/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>details</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>isEnrollment</con:sourceStep><con:sourcePath>data/text()</con:sourcePath><con:targetType>details</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>pan</con:name><con:value/></con:property><con:property><con:name>apiUserName</con:name><con:value/></con:property><con:property><con:name>apiPasswd</con:name><con:value/></con:property><con:property><con:name>details</con:name><con:value>{"errorCode":"5","errorMessage":" "}</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBindings" searchProperties="true" id="7acaf22e-ca72-48bb-bc7d-5ad50dda2028" disabled="true"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>data</con:name><con:value>{"errorCode":"0","errorMessage":"","bindings":[{"bindingId":"fd3afc57-c6d0-4e08-aaef-1b7cfeb093dc","maskedPan":"400000**0002","expiryDate":"201512"}]}</con:value></con:property><con:property><con:name>bindingId</con:name><con:value> </con:value></con:property><con:property><con:name>maskedPan</con:name><con:value>411111**1112</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="PropertiesTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>clientId</con:name><con:sourceType>clientId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>clientId</con:targetType><con:targetStep>getbindings</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>username</con:name><con:sourceType>userName</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>getbindings</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>getbindings</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>maskedPan</con:name><con:sourceType>maskedPan</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>maskedPan</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getbindings"><con:settings/><con:config service="AlfaRestApi" resourcePath="/getBindings.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getbindings" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/testpayment/rest/</con:endpoint><con:request/><con:assertion type="Simple Contains" name="Contains"><con:configuration><token>"errorCode":"0"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>data</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>getbindings</con:sourceStep><con:targetType>data</con:targetType><con:targetStep>Properties</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="dataScript"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import org.codehaus.groovy.runtime.TimeCategory;
import org.apache.commons.lang.RandomStringUtils;
import groovy.json.JsonBuilder;
import groovy.json.JsonSlurper;
import groovy.json.JsonOutput;
import java.security.MessageDigest;
import java.util.Iterator;

def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "Properties");
def registerString	= propertiesRegisterTransfer.getPropertyValue( "data" );
def pan = propertiesRegisterTransfer.getPropertyValue( "maskedPan" );
def jsonObj = new JsonSlurper().parseText( registerString);


Iterator i =jsonObj.bindings.iterator();

log.info "====================="
def myBinding;
while ( i.hasNext()) 
{
		myBinding = i.next();
          if (myBinding.maskedPan == pan) 
          {
          	propertiesRegisterTransfer.setPropertyValue( "bindingId", myBinding.bindingId);
          	break;
          }
   		propertiesRegisterTransfer.setPropertyValue( "bindingId", " ");
}
     
</script></con:config></con:testStep><con:testStep type="transfer" name="bindingTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>bindingId</con:name><con:sourceType>bindingId</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>bindingId</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>clientId</con:name><con:value>client</con:value></con:property><con:property><con:name>userName</con:name><con:value>binding_api</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>bindingId</con:name><con:value> </con:value></con:property><con:property><con:name>maskedPan</con:name><con:value>411111**1112</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="unBindCard" searchProperties="true" disabled="true"><con:settings/><con:testStep type="transfer" name="PropertyTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>usrNm</con:name><con:sourceType>userName</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>unBindCard</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>unBindCard</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>bindId</con:name><con:sourceType>bindingId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>bindingId</con:targetType><con:targetStep>unBindCard</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="unBindCard"><con:settings/><con:config service="AlfaRestApi" resourcePath="/unBindCard.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="unBindCard" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/devpayment/rest/</con:endpoint><con:request/><con:assertion type="Simple Contains" name="Contains"><con:configuration><token>"errorCode":"0"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="bindingId" value=""/>
  <con:entry key="userName" value=""/>
  <con:entry key="password" value=""/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>userName</con:name><con:value/></con:property><con:property><con:name>pwd</con:name><con:value/></con:property><con:property><con:name>bindingId</con:name><con:value/></con:property><con:property><con:name>errorCode</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="paymentOrderBindings" searchProperties="true" disabled="true"><con:settings/><con:testStep type="properties" name="PropertiesPayment"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>data</con:name><con:value>{"error":"  ","errorCode":2}</con:value></con:property><con:property><con:name>errorCode</con:name><con:value>0</con:value></con:property><con:property><con:name>info</con:name><con:value>  ,  ...</con:value></con:property><con:property><con:name>redirect</con:name><con:value>finish.html?login=test&amp;password=testPwd&amp;orderId=f7e30aa7-6cae-4113-9ba2-ce783dac59d3</con:value></con:property><con:property><con:name>paReq</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>termUrl</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>mdOrder</con:name><con:value>f7e30aa7-6cae-4113-9ba2-ce783dac59d3</con:value></con:property><con:property><con:name>acsUrlText</con:name><con:value>https://test.paymentgate.ru/acs/auth/start.do</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="RegisterTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>MDorder</con:name><con:sourceType>mdOrder</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>mdOrder</con:targetType><con:targetStep>paymentOrderBinding</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false" transferToAll="false" entitize="false"><con:name>mdOrder</con:name><con:sourceType>mdOrder</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>mdOrder</con:targetType><con:targetStep>PropertiesPayment</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false"><con:name>bindingId</con:name><con:sourceType>bindingId</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>bindingId</con:targetType><con:targetStep>paymentOrderBinding</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>username</con:name><con:sourceType>user</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>userName</con:targetType><con:targetStep>paymentOrderBinding</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false"><con:name>pwd</con:name><con:sourceType>pwd</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>password</con:targetType><con:targetStep>paymentOrderBinding</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="paymentOrderBinding"><con:settings/><con:config service="AlfaRestApi" resourcePath="/paymentOrderBinding.do" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="paymentOrderBinding" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://test.paymentgate.ru/testpayment/rest/</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="dataTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>data</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>paymentOrderBinding</con:sourceStep><con:sourcePath>data/text()</con:sourcePath><con:targetType>data</con:targetType><con:targetStep>PropertiesPayment</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="dataParser"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import org.codehaus.groovy.runtime.TimeCategory;
import org.apache.commons.lang.RandomStringUtils;
import groovy.json.JsonBuilder;
import groovy.json.JsonSlurper;
import groovy.json.JsonOutput;
import java.security.MessageDigest;

def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "PropertiesPayment");

def registerString			= propertiesRegisterTransfer.getPropertyValue( "data" );
log.info registerString	;

def jsonObj = new JsonSlurper().parseText( registerString);
def String info = jsonObj.info;
def String redirect = jsonObj.redirect;
def String errorCode = jsonObj.errorCode;

//---  ACS--------------------//
def String PaReq = jsonObj.paReq;
def String TermUrl = jsonObj.termUrl;
//---------------------------------------------------//

propertiesRegisterTransfer.setPropertyValue( "errorCode", errorCode);
propertiesRegisterTransfer.setPropertyValue( "info", info);
propertiesRegisterTransfer.setPropertyValue( "redirect", redirect);
propertiesRegisterTransfer.setPropertyValue( "paReq", PaReq);
propertiesRegisterTransfer.setPropertyValue( "termUrl", TermUrl);
if(TermUrl == null)
testRunner.gotoStepByName( "transferProperties")
else
testRunner.gotoStepByName("PaReqScript");
</script></con:config></con:testStep><con:testStep type="groovy" name="PaReqScript"><con:settings/><con:config><script>import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import static org.hamcrest.CoreMatchers.*;
import org.apache.commons.io.FileUtils;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import java.util.*;
import java.text.*;
import org.codehaus.groovy.runtime.TimeCategory;
import org.apache.commons.lang.RandomStringUtils;
import groovy.json.JsonBuilder;
import groovy.json.JsonSlurper;
import groovy.json.JsonOutput;
import java.security.MessageDigest;

//--------------------------------------------------
def propertiesRegisterTransfer = testRunner.testCase.getTestStepByName( "PropertiesPayment");
def paReq = propertiesRegisterTransfer.getPropertyValue( "paReq");
def termUrl = propertiesRegisterTransfer.getPropertyValue( "termUrl");
def mdOrder = propertiesRegisterTransfer.getPropertyValue( "mdOrder");
def acsUrlText = propertiesRegisterTransfer.getPropertyValue( "acsUrlText");

log.info paReq;

 WebDriver driver = new FirefoxDriver();
 
driver.get("https://test.paymentgate.ru/testpayment/merchants/test/test_3dsec.html");
acsUrlText
driver.findElement(By.id("acsUrlText")).clear();
driver.findElement(By.id("acsUrlText")).sendKeys(acsUrlText);
driver.findElement(By.id("termUrlText")).clear();
driver.findElement(By.id("termUrlText")).sendKeys(termUrl);
driver.findElement(By.id("mdText")).clear();
driver.findElement(By.id("mdText")).sendKeys(mdOrder);
driver.findElement(By.id("paReqText")).clear();
driver.findElement(By.id("paReqText")).sendKeys(paReq);

driver.findElement(By.id("redirectToAcs")).click();

Thread.sleep(1000);

WebElement pass = driver.findElement(By.id("password"));
pass.sendKeys("12345678");
driver.findElement(By.id("submit_id")).click();
driver.quit();



</script></con:config></con:testStep><con:testStep type="transfer" name="transferProperties"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:properties><con:property><con:name>user</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>mdOrder</con:name><con:value>f7e30aa7-6cae-4113-9ba2-ce783dac59d3</con:value></con:property><con:property><con:name>bindingId</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="register_payment_getStatus" searchProperties="true" id="e40e8a36-220a-4f19-af4d-046bb589769f"><con:settings/><con:testStep type="properties" name="Properties"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>orderId</con:name><con:value>1a116ecd-87ab-4355-af0f-1c45e57c1cac</con:value></con:property><con:property><con:name>orderNumber</con:name><con:value>20131121015151152</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="simpleScript"><con:settings/><con:config><script>import java.util.*;
import java.text.*;
import org.codehaus.groovy.runtime.TimeCategory;
import org.apache.commons.lang.RandomStringUtils;
import groovy.json.JsonBuilder;
import groovy.json.JsonSlurper;
import groovy.json.JsonOutput;
import java.security.MessageDigest;


register();
payment();
getOrderStatus();

def register()
{
project = testRunner.testCase.testSuite.project;
authTransfer = testRunner.testCase.getTestStepByName( "Properties");
propReg = testRunner.testCase.getTestStepByName("register");

			username= authTransfer.getPropertyValue( "username");
			pwd=authTransfer.getPropertyValue( "pwd");
			propReg.setPropertyValue( "username",username);	
			propReg.setPropertyValue( "pwd", pwd);

testRunner.runTestStep( project.testSuites["test-cases"].testCases["register_payment_getStatus"].testSteps["register"] )	;

			orderNumber= propReg.getPropertyValue( "orderNumber");
			orderId=propReg.getPropertyValue( "orderId");	
						
			authTransfer.setPropertyValue( "orderId",orderId);	
			authTransfer.setPropertyValue( "orderNumber", orderNumber);
			log.info orderId;
}

def payment()
{
project = testRunner.testCase.testSuite.project;
authTransfer = testRunner.testCase.getTestStepByName( "Properties");
propPay = testRunner.testCase.getTestStepByName("payment");

			username= authTransfer.getPropertyValue( "username");
			pwd=authTransfer.getPropertyValue( "pwd");
			orderId=authTransfer.getPropertyValue( "orderId");
			
			propPay.setPropertyValue( "user",username);	
			propPay.setPropertyValue( "pwd", pwd);
			propPay.setPropertyValue( "mdOrder", orderId);

			log.info username;

testRunner.runTestStep( project.testSuites["test-cases"].testCases["register_payment_getStatus"].testSteps["payment"] )	;

			
		//	authTransfer.setPropertyValue( "orderId",orderId);	
		//	authTransfer.setPropertyValue( "orderNumber", orderNumber);
		//	log.info orderId;
}

def getOrderStatus()
{
project = testRunner.testCase.testSuite.project;
authTransfer = testRunner.testCase.getTestStepByName( "Properties");
propStats = testRunner.testCase.getTestStepByName("getOrderStatus");

			username= authTransfer.getPropertyValue( "username");
			pwd=authTransfer.getPropertyValue( "pwd");
			orderId=authTransfer.getPropertyValue( "orderId");
			
			propStats.setPropertyValue( "userName",username);	
			propStats.setPropertyValue( "pwd", pwd);
			propStats.setPropertyValue( "orderId", orderId);

testRunner.runTestStep( project.testSuites["test-cases"].testCases["register_payment_getStatus"].testSteps["getOrderStatus"] )	;

			log.info "";
		//	authTransfer.setPropertyValue( "orderId",orderId);	
		//	authTransfer.setPropertyValue( "orderNumber", orderNumber);
		//	log.info orderId;
}
</script></con:config></con:testStep><con:testStep type="calltestcase" name="getOrderStatus" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>c8d0d140-3a97-4fc1-8301-bd0f2a43e9e6</con:targetTestCase><con:properties><con:property><con:name>orderId</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>language</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>userName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>pwd</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>expiry</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>cardholderName</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>depositAmount</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>currency</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>approvalCode</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>authCode</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>ErrorCode</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>ErrorMessage</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>orderStatus</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>OrderNumber</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Pan</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>ip</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>amount</con:name><con:value xsi:nil="true"/></con:property></con:properties><con:returnProperties><con:entry>expiry</con:entry><con:entry>cardholderName</con:entry><con:entry>depositAmount</con:entry><con:entry>currency</con:entry><con:entry>approvalCode</con:entry><con:entry>authCode</con:entry><con:entry>ErrorCode</con:entry><con:entry>ErrorMessage</con:entry><con:entry>orderStatus</con:entry><con:entry>OrderNumber</con:entry><con:entry>Pan</con:entry><con:entry>ip</con:entry><con:entry>amount</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="register" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>01dd67ce-544e-445f-a08e-928be02eb2d5</con:targetTestCase><con:properties><con:property><con:name>username</con:name><con:value>aa</con:value></con:property><con:property><con:name>pwd</con:name><con:value>Privetik1@</con:value></con:property><con:property><con:name>orderId</con:name><con:value/></con:property><con:property><con:name>returnUrl</con:name></con:property><con:property><con:name>amount</con:name></con:property><con:property><con:name>currency</con:name></con:property><con:property><con:name>language</con:name></con:property><con:property><con:name>EndPoint</con:name></con:property><con:property><con:name>orderNumber</con:name><con:value/></con:property></con:properties><con:returnProperties><con:entry>username</con:entry><con:entry>pwd</con:entry><con:entry>orderId</con:entry><con:entry>orderNumber</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="payment" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8b9da7dd-6b0e-4d90-b446-a57675e0f6ab</con:targetTestCase><con:properties><con:property><con:name>user</con:name><con:value>test</con:value></con:property><con:property><con:name>pwd</con:name><con:value>testPwd</con:value></con:property><con:property><con:name>mdOrder</con:name><con:value>1a116ecd-87ab-4355-af0f-1c45e57c1cac</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:properties><con:property><con:name>EndPoint</con:name><con:value/></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:reporting><con:xmlTemplates/><con:parameters/></con:reporting><con:sensitiveInformation/></con:soapui-project>